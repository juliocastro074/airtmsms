function _defineProperty(t,e,s){return(e=_toPropertyKey(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"==typeof e?e:String(e)}function _toPrimitive(t,e){if("object"!=typeof t||null===t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}SK="undefined"==typeof SK?{}:SK,SK.Applications=SK.Applications||{},SK.Applications.OpenHours=SK.Applications.OpenHours||{},SK.Applications.OpenHours.DateTime=SK.Applications.OpenHours.DateTime||{units:{},Date:new Date,is_leap_year:!1,init:function(){this.is_leap_year=this.isLeapYear(e);var t=this.Date.getMonth(),e=this.Date.getFullYear(),s=this.is_leap_year?316224e5:31536e6,i=864e5*this.daysInMonth(t,e);this.units={ms:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6084e5,month:i,year:s}},diff:function(t,e,s){return Math.round((this.convertToPrimitive(e)-this.convertToPrimitive(t))/this.units[s||"day"])},convertTo24HObjFormat:function(t){t={hours:t.trim(),minutes:0};var e=/(am|pm)/i.test(t.hours)&&t.hours.slice(-2);if("string"==typeof t.hours){if(t.hours=t.hours.replace(/(\s+|am|pm)/gi,""),/:/.test(t.hours)){var s=t.hours.split(":");t.hours=s[0],t.minutes=parseInt(s[1],10)}t.hours=parseInt(t.hours,10)}return e&&(12==t.hours&&/am/i.test(e)?t.hours=0:t.hours<12&&/pm/i.test(e)&&(t.hours=t.hours+12)),t},convertToPrimitive:function(t){return"string"==typeof t&&(t=new Date(t)),"object"==typeof t&&(t=t.valueOf()),t},isLeapYear:function(t){return t%4==0&&t%100!=0||t%400==0},daysInMonth:function(t){return[31,this.is_leap_year?29:28,31,30,31,30,31,31,30,31,30,31][t]},replaceTimeInDate:function(t,e){e=e||this.Date;var s=this.convertTo24HObjFormat(t);return new Date(e).setHours(s.hours,s.minutes)},isInTimeFrame:function(t,e,s){return s=s&&s.valueOf||this.Date.valueOf(),this.diff(t,s,"second")>=0&&this.diff(s,e,"second")>=0},isInHalfHour:function(t){var e=this.diff(this.Date,t,"second");return e<1800&&e>0},changeDate:function(t,e){return(t=new Date(t)).setDate(t.getDate()+e)},setDate:function(){this.DateTime=new Date},getDay:function(){return this.Date.getDay()},getDate:function(){return this.Date}},SK.Applications.OpenHours.DateTime.init(),SK="undefined"==typeof SK?{}:SK,SK.React=SK.React||{},SK.React.Validators=SK.React.Validators||{},SK.React.Validators.time=function(t,e){return/^((([1-9]|1[0-2]|0[1-9])(:[0-5][0-9])?\s?([ap][m])?)|(([1-9]|1[0-9]|2[0-4]|0[0-9])(:[0-5][0-9])?\s?))$/i.test(t)},SK.React.Validators.timesplit=function(t,e){return!t||SK.React.Validators.time(t,e)},SK="undefined"==typeof SK?{}:SK,SK.Applications=SK.Applications||{},SK.Applications.OpenHours=SK.Applications.OpenHours||{},function(t){t.defaultStartingTime={start:"09:00 am",end:"06:00 pm"},t.defaultProperties={split_time:"0",open_hours:[1,1,1,1,1,0,0].map(function(e){return{start:t.defaultStartingTime.start,end:t.defaultStartingTime.end,start_timesplit:"",end_timesplit:"",status:e}})},t.weekdays=["Lunes","Martes","Miércoles","Jueves","Viernes","Sábado","Domingo"],t.errorMessage="Ingrese un horario válido (p. ej., 6:00 a. m., 10:30, 18)."}(SK.Applications.OpenHours),SK="undefined"==typeof SK?{}:SK,SK.Applications=SK.Applications||{},SK.Applications.OpenHours=SK.Applications.OpenHours||{},SK.Applications.OpenHours.Display=class extends SK.React.Component.Application.Display{constructor(t){super(t),_defineProperty(this,"day_id",0),_defineProperty(this,"is_client",SK.Singletons.env.get("client")),_defineProperty(this,"date_time",SK.Applications.OpenHours.DateTime),_defineProperty(this,"default_properties",SK.Applications.OpenHours.defaultProperties),_defineProperty(this,"weekdays",SK.Applications.OpenHours.weekdays),_defineProperty(this,"open_closed_states",{open:{label:"Abierto ahora",className:"sk-oh-state-open"},closed:{label:"Actualmente cerrado",className:"sk-oh-state-closed"},opening_soon:{label:"Se abrirá próximamente",className:"sk-oh-state"},closing_soon:{label:"Se cerrará próximamente",className:"sk-oh-state"}}),this.state.__weekdays=this.weekdays;var e=this.state.hasOwnProperty("data_source");this.state.__old_instance=(this.state.OpenHours||[]).length&&!e,this.state.__has_global_data=this.state.__settings&&(this.state.__settings.open_hours||[]).length,this.state.__old_instance?this.state.data_source=0:this.state.__has_global_data||(this.state.__settings=this.default_properties),this.setDateTime()}render(){var t=[],e=Object.assign({},this.getCurrentOpenHoursData()),s="",i="sk-oh-days",a={day_id:-1},n=1==e.split_time,r="day_view"==this.state.display_format,o=this.is_client&&1==this.state.show_state;o&&(a=this.getShowStateData(e));var l=a.day_id>=0?a.day_id:this.day_id;return r&&(s="Hoy",e.open_hours=[e.open_hours[l]]),1==this.state.days_in_bold&&(i+=" sk-oh-days-bold"),e.open_hours.forEach((e,d)=>{var p=o&&(d==l||r);t.push(React.createElement("div",{className:"sk-oh-day-wrapper",key:d},React.createElement("div",{className:i},s||this.state.__weekdays[d]),React.createElement("div",{className:"sk-oh-times"},1==e.status?React.createElement("div",{className:"sk-oh-times-wrapper"},React.createElement("div",null,e.start," - ",e.end),n&&(e.start_timesplit||e.end_timesplit)&&React.createElement("div",null,e.start_timesplit," - ",e.end_timesplit)):"Cerrado"),p&&React.createElement("div",{className:a.className||"sk-oh-state-closed"},a.label||"Actualmente cerrado")))}),React.createElement("div",{className:"sk-oh-app-area"},t)}getSnapshotBeforeUpdate(t,e){return this.setDateTime(),null}getCurrentOpenHoursData(){return 0!=this.state.data_source||this.isGlobalForced()?this.state.__settings:{split_time:this.state.split_time,open_hours:SK.Util.deepAssign([],this.state.OpenHours)}}setDateTime(){this.date_time.setDate(),this.day_id=this.date_time.getDay(),this.day_id=0==this.day_id?6:this.day_id-1}getShowStateData(t){var e=this.date_time.replaceTimeInDate(t.open_hours[this.day_id].start),s=this.date_time.isInHalfHour(e),i="";if(!s&&this.date_time.diff(this.date_time.getDate().valueOf(),e,"second")>0){var a=0==this.day_id?6:this.day_id-1;if("closed"!=(i=this.getOpenClosedState(t.open_hours[a],this.date_time.changeDate(this.date_time.getDate(),-1))))return(i=this.open_closed_states[i]).day_id=a,i}return(i=this.open_closed_states[s?"opening_soon":this.getOpenClosedState(t.open_hours[this.day_id])]).day_id=this.day_id,i}getOpenClosedState(t,e){if("object"!=typeof t||0==t.status)return"closed";delete(t=SK.Util.deepAssign({},t)).status,delete t.label;var s=(1==this.state.data_source?1==this.state.__settings.split_time:this.state.split_time)&&t.start_timesplit&&t.end_timesplit;for(var i in s||(delete t.start_timesplit,delete t.end_timesplit),t){if(!t.hasOwnProperty(i)||!SK.React.Validators.time(t[i]))return"closed";t[i]=this.date_time.replaceTimeInDate(t[i],e)}return s&&t.start>=t.end_timesplit?t.end_timesplit=this.date_time.changeDate(t.end_timesplit,1):!s&&t.start>=t.end&&(t.end=this.date_time.changeDate(t.end,1)),this.checkOpenClosedState(t,s)}checkOpenClosedState(t,e){if(e)switch(!0){case this.date_time.isInHalfHour(t.end_timesplit):return"closing_soon";case this.date_time.isInTimeFrame(t.start_timesplit,t.end_timesplit):return"open";case this.date_time.isInHalfHour(t.start_timesplit):return"opening_soon";case this.date_time.isInTimeFrame(t.end,t.start_timesplit):return"closed";case this.date_time.isInHalfHour(t.end):return"closing_soon";case this.date_time.isInTimeFrame(t.start,t.end):return"open"}return this.date_time.isInHalfHour(t.start)?"opening_soon":e?"closed":this.date_time.isInHalfHour(t.end)?"closing_soon":this.date_time.isInTimeFrame(t.start,t.end)?"open":"closed"}isGlobalForced(){return this.state.last_force_global=this.state.last_force_global||0,this.state.__settings.force_global>this.state.last_force_global}};