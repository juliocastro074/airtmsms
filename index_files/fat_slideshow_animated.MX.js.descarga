if(Element.implement({isDisplayed:function(){return"none"!=this.getStyle("display")},toggle:function(){return this[this.isDisplayed()?"hide":"show"]()},hide:function(){var t;try{t=this.getStyle("display")}catch(t){}return this.store("originalDisplay",t||"block").setStyle("display","none")},show:function(t){return this.setStyle("display",t||this.retrieve("originalDisplay")||"block")}}),Array.implement({intersect:function(t){var e=this.slice();return this.each(function(i){t.indexOf(i)<0&&e.splice(e.indexOf(i),1)},this),e},differentiate:function(t){var e=this.slice(),i=t.slice();return t.each(function(t){e.indexOf(t)>-1&&(e.splice(e.indexOf(t),1),i.splice(i.indexOf(t),1))},this),e.combine(i)},getRange:function(t,e){var i=[],s=0,n=t+e>this.length?this.length:t+e;if(t>=0)for(var o=t;o<n;o++)i[s++]=this[o];return i},invoke:function(t){for(var e=Array.slice(arguments,1),i=[],s=0,n=this.length;s<n;s++){var o=this[s];i.push(o[t].apply(o,e))}return i},searchBinary:function(t,e){for(var i,s=this.length,n=-1;s-n>1;)this[i=s+n>>1]<t?n=i:s=i;return this[s]!=t?e?s:-1:s},unique:function(){return[].combine(this)},sum:function(){for(var t=0,e=0;t<this.length;e+=this[t++]);return e},max:function(){return Math.max.apply({},this)},min:function(){return Math.min.apply({},this)}}),MooTools.More={version:"1.5.0",build:"73db5e24e6e9c5c87b3a27aebef2248053f7db37"},function(){var t=function(t){return!(t&&!t.offsetHeight&&!t.offsetWidth)};Element.implement({measure:function(e){if(t(this))return e.call(this);for(var i=this.getParent(),s=[];!t(i)&&i!=document.body;)s.push(i.expose()),i=i.getParent();var n=this.expose(),o=e.call(this);return n(),s.each(function(t){t()}),o},expose:function(){if("none"!=this.getStyle("display"))return function(){};var t=this.style.cssText;return this.setStyles({display:"block",position:"absolute",visibility:"hidden"}),function(){this.style.cssText=t}.bind(this)},getDimensions:function(t){t=Object.merge({computeSize:!1},t);var e={x:0,y:0},i=function(t,e){return e.computeSize?t.getComputedSize(e):t.getSize()},s=this.getParent("body");if(s&&"none"==this.getStyle("display"))e=this.measure(function(){return i(this,t)});else if(s)try{e=i(this,t)}catch(t){}return Object.append(e,e.x||0===e.x?{width:e.x,height:e.y}:{x:e.width,y:e.height})},getComputedSize:function(t){var e,i={},s={width:0,height:0};return"vertical"==(t=Object.merge({styles:["padding","border"],planes:{height:["top","bottom"],width:["left","right"]},mode:"both"},t)).mode?(delete s.width,delete t.planes.width):"horizontal"==t.mode&&(delete s.height,delete t.planes.height),function(t,e){var i=[];return Object.each(e,function(e){Object.each(e,function(e){t.each(function(t){i.push(t+"-"+e+("border"==t?"-width":""))})})}),i}(t.styles,t.planes).each(function(t){i[t]=this.getStyle(t).toInt()},this),Object.each(t.planes,function(t,n){var o=n.capitalize(),a=this.getStyle(n);"auto"!=a||e||(e=this.getDimensions()),a=i[n]="auto"==a?e[n]:a.toInt(),s["total"+o]=a,t.each(function(t){var e=function(t,e){var i=0;return Object.each(e,function(e,s){s.test(t)&&(i+=e.toInt())}),i}(t,i);s["computed"+t.capitalize()]=e,s["total"+o]+=e})},this),Object.append(s,i)}})}(),function(){if("createTouch"in document){["touchstart","touchmove","touchend"].each(function(t){Element.NativeEvents[t]=2});var t={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},e=function(t){var e=t.event.changedTouches[0];return t.page={x:e.pageX,y:e.pageY},!0};for(var i in t)Element.Events[i]={base:t[i],condition:e}}}(),["touchstart","touchmove","touchend"].each(function(t){Element.NativeEvents[t]=2}),Element.Events.swipe={onAdd:function(t){var e,i,s=!1,n=function(t){s=!0,e=t.event.touches[0].pageX,i=t.event.touches[0].pageY},o=function(n){var o=n.event.touches[0].pageX,a=n.event.touches[0].pageY,h=o-e,r=h<-1*Element.Events.swipe.swipeWidth,l=h>Element.Events.swipe.swipeWidth;if(!s||!l&&!r||n.onlySwipeLeft&&!r||n.onlySwipeRight&&!l||(s=!1,t.call(this,{direction:l?"right":"left",startX:e,endX:o})),Element.Events.swipe.cancelVertical&&Math.abs(i-a)<Math.abs(e-o))return!1};this.addEvent("touchstart",n),this.addEvent("touchmove",o);var a={};a[t]={touchstart:n,touchmove:o},this.store("swipeAddedEvents",a)},onRemove:function(t){$H(this.retrieve("swipeAddedEvents")[t]).each(function(t,e){this.removeEvent(e,t)},this)}},Element.Events.swipe.swipeWidth=70,Element.Events.swipe.cancelVertical=!0,Element.Properties.csstext={set:function(t){if("style"==this.get("tag")){this.erase("csstext");var e=document.createTextNode(t);this.sheet&&this.appendChild(e)}return this},get:function(){if("style"==this.get("tag")){var t="";return this.sheet&&(t=this.innerHTML),t}},erase:function(){if("style"==this.get("tag")&&this.sheet&&this.firstChild)for(;this.firstChild;)this.removeChild(this.firstChild);return this}},function(){Object.extend({isEqual:function(t,e){if(t===e)return!0;var i=typeOf(t);if(i!=typeOf(e))return!1;if(t==e)return!0;if(!t&&e||t&&!e)return!1;if(t.isEqual)return t.isEqual(e);if(e.isEqual)return e.isEqual(t);if(t!=t&&e!=e)return!1;if("date"==i)return t.getTime()===e.getTime();if("function"==i)return!0;if("regexp"==i)return t.source===e.source&&t.global===e.global&&t.ignoreCase===e.ignoreCase&&t.multiline===e.multiline;if("object"!==i&&"array"!==i)return!1;if(t.length&&t.length!==e.length)return!1;var s=Object.keys(t),n=Object.keys(e);if(s.length!=n.length)return!1;for(var o in t)if(!(o in e&&Object.isEqual(t[o],e[o])))return!1;return!0}});var t,e=!!(t=function(){for(var t=["ms","O","Moz","webkit"],e=document.documentElement.style,i=t.length;i--;){var s=t[i];if(void 0!==e[s+"Transition"])return s}return!1}())&&{transition:t+"Transition",transitionProperty:t+"TransitionProperty",transitionDuration:t+"TransitionDuration",transitionTimingFunction:t+"TransitionTimingFunction",transitionend:"Moz"==t?"transitionend":("ms"==t?"MS":t)+"TransitionEnd"};Element.NativeEvents[e.transitionend]=2,(window.DOMEvent||window.Event).implement({getPropertyName:function(){return this.event.propertyName},getElapsedTime:function(t){return t?this.event.elapsedTime:(1e3*this.event.elapsedTime).toInt()}}),Array.implement({containsArray:function(t){return t.every(function(t){return this.contains(t)},this)}});var i={linear:"0,0,1,1","expo:in":"0.71,0.01,0.83,0","expo:out":"0.14,1,0.32,0.99","expo:in:out":"0.85,0,0.15,1","circ:in":"0.34,0,0.96,0.23","circ:out":"0,0.5,0.37,0.98","circ:in:out":"0.88,0.1,0.12,0.9","sine:in":"0.22,0.04,0.36,0","sine:out":"0.04,0,0.5,1","sine:in:out":"0.37,0.01,0.63,1","quad:in":"0.14,0.01,0.49,0","quad:out":"0.01,0,0.43,1","quad:in:out":"0.47,0.04,0.53,0.96","cubic:in":"0.35,0,0.65,0","cubic:out":"0.09,0.25,0.24,1","cubic:in:out":"0.66,0,0.34,1","quart:in":"0.69,0,0.76,0.17","quart:out":"0.26,0.96,0.44,1","quart:in:out":"0.76,0,0.24,1","quint:in":"0.64,0,0.78,0","quint:out":"0.22,1,0.35,1","quint:in:out":"0.9,0,0.1,1"};Fx.CSS3Funcs={initialize:function(t,s){e&&((s=s||{}).transition&&i[s.transition]||(s.transition="sine:in:out"),this.initializeCSS3&&this.initializeCSS3(t,s)),this.parent(t,s)},startCSS3:function(t,e,i){if(Object.isEqual(e,i))this.fireEvent("start",this.subject),this.fireEvent("complete",this.subject);else{this.preTransStyles=this.element.getStyles(Fx.CSS3Funcs.css3Features.transitionProperty,Fx.CSS3Funcs.css3Features.transitionDuration,Fx.CSS3Funcs.css3Features.transitionTimingFunction);var s={};t.each(function(t){s[t]=!1}),this.animatingProperties=t,this.boundComplete=function(t){s[t.getPropertyName()]=!0,Object.every(s,function(t){return t})&&(this.element.removeEvent(Fx.CSS3Funcs.css3Features.transitionend,this.boundComplete),this.element.setStyles(this.preTransStyles),this.boundComplete=null,this.fireEvent("complete",this.subject),this.callChain()||this.fireEvent("chainComplete",this.subject))}.bind(this),this.element.addEvent(Fx.CSS3Funcs.css3Features.transitionend,this.boundComplete);var n=function(){var s={};s[Fx.CSS3Funcs.css3Features.transitionProperty]=t.reduce(function(t,e){return t+", "+e}),s[Fx.CSS3Funcs.css3Features.transitionDuration]=(Fx.Durations[this.options.duration]||this.options.duration.toInt()||500)+"ms",s[Fx.CSS3Funcs.css3Features.transitionTimingFunction]="cubic-bezier("+Fx.CSS3Funcs.transitionTimings[this.options.transition]+")",this.element.setStyles(s),this.set(this.compute(e,i,1))}.bind(this);this.element.setStyle(Fx.CSS3Funcs.css3Features.transitionProperty,"none"),this.set(this.compute(e,i,0)),n.delay(.1),this.fireEvent("start",this.subject)}return this},pause:function(){return this.css3Supported?this:this.parent()},resume:function(){return this.css3Supported?this:this.parent()},isRunning:function(){return this.css3Supported?!!this.boundComplete:this.parent()}},Fx.CSS3Funcs.css3Features=e,Fx.CSS3Funcs.transitionTimings=i,Fx.CSS3Funcs.animatable=["background-color","border-bottom-width","border-left-width","border-right-width","border-spacing","border-top-width","border-width","bottom","color","font-size","font-weight","height","left","letter-spacing","line-height","margin-bottom","margin-left","margin-right","margin-top","max-height","max-width","min-height","min-width","opacity","outline-color","outline-offset","outline-width","padding-bottom","padding-left","padding-right","padding-top","right","text-indent","top","vertical-align","visibility","width","word-spacing","z-index"],Fx.CSS3Stop={cancel:function(){return this.css3Supported?(this.isRunning()&&(this.element.removeEvent(Fx.CSS3Funcs.css3Features.transitionend,this.boundComplete),this.element.setStyles(this.preTransStyles),this.boundComplete=null,this.fireEvent("cancel",this.subject),this.clearChain()),this):this.parent()},stop:function(){return this.css3Supported?(this.isRunning()&&(this.element.removeEvent(Fx.CSS3Funcs.css3Features.transitionend,this.boundComplete),this.element.setStyles(this.preTransStyles),this.boundComplete=null,this.fireEvent("complete",this.subject),this.callChain()||this.fireEvent("chainComplete",this.subject)),this):this.parent()}}}(),function(){var t,e=Fx.Tween;(t=new Class({Extends:e,checkCSS3:function(t){return Fx.CSS3Funcs.css3Features&&Fx.CSS3Funcs.animatable.contains(t)},start:function(t,e,i){var s=Array.flatten(arguments);if(this.property=this.options.property||s.shift(),this.css3Supported=this.checkCSS3(this.property)){if(!this.check(t,e,i))return this;var n=this.prepare(this.element,this.property,s);return this.startCSS3([this.property],n.from,n.to)}return this.parent(t,e,i)}})).implement(Fx.CSS3Funcs),t.implement(Fx.CSS3Stop),Fx.Tween.CSS2=e,Fx.Tween.CSS3=t}(),function(){var t,e=Fx.Morph;(t=new Class({Extends:e,checkCSS3:function(t){return Fx.CSS3Funcs.css3Features&&Fx.CSS3Funcs.animatable.containsArray(Object.keys(t))},start:function(t){if(this.css3Supported=this.checkCSS3(t)){if(!this.check(t))return this;"string"==typeof t&&(t=this.search(t));var e={},i={},s=[];for(var n in t){var o=this.prepare(this.element,n,t[n]);Object.isEqual(o.from,o.to)||(e[n]=o.from,i[n]=o.to,s.push(n))}return this.startCSS3(s,e,i)}return this.parent(t)}})).implement(Fx.CSS3Funcs),t.implement(Fx.CSS3Stop),Fx.Morph.CSS2=e,Fx.Morph.CSS3=t}(),function(){if(Fx.Elements){var t,e=Fx.Elements;(t=new Class({Extends:e,initializeCSS3:function(t,e){this.morphers=t.map(function(t){return new Fx.Morph(t,Object.merge({},e,{onComplete:this._complete.bind(this),onCancel:this._cancel.bind(this)}))}.bind(this))},_complete:function(){0==--this.count&&(this.fireEvent("complete",this.subject),this.callChain()||this.fireEvent("chainComplete",this.subject))},_cancel:function(){0==--this.count&&(this.fireEvent("cancel",this.subject),this.clearChain())},checkCSS3:function(t){return Fx.CSS3Funcs.css3Features&&Object.every(t,function(t,e){return!t||!this.elements[e]||Fx.CSS3Funcs.animatable.containsArray(Object.keys(t))},this)},count:0,start:function(t){return(this.css3Supported=this.checkCSS3(t))?this.check(t)?(this.count=0,Object.each(t,function(t,e){t&&this.elements[e]&&(this.count++,this.morphers[e].start(t))},this),this.fireEvent("start",this),this):this:this.parent(t)},stop:function(){return this.css3Supported?(Object.each(this.morphers,function(t){t.stop()}),this):this.parent()},cancel:function(){return this.css3Supported?(Object.each(this.morphers,function(t){t.cancel()}),this):this.parent()},isRunning:function(){return this.css3Supported?0!=this.count:this.parent()}})).implement(Fx.CSS3Funcs),Fx.Elements.CSS2=e,Fx.Elements.CSS3=t}}(),Element.Properties.tweenCSS3={set:function(t){return this.get("tweenCSS3").cancel().setOptions(t),this},get:function(){var t=this.retrieve("tweenCSS3");return t||(t=new Fx.Tween.CSS3(this,{link:"cancel"}),this.store("tweenCSS3",t)),t}},Element.Properties.morphCSS3={set:function(t){return this.get("morphCSS3").cancel().setOptions(t),this},get:function(){var t=this.retrieve("morphCSS3");return t||(t=new Fx.Morph.CSS3(this,{link:"cancel"}),this.store("morphCSS3",t)),t}},Element.implement({tweenCSS3:function(t,e,i){return this.get("tweenCSS3").start(t,e,i),this},morphCSS3:function(t){return this.get("morphCSS3").start(t),this}}),function(){Fx.Scroll=new Class({Extends:Fx,options:{offset:{x:0,y:0},wheelStops:!0},initialize:function(t,e){if(this.element=this.subject=document.id(t),this.parent(e),"element"!=typeOf(this.element)&&(this.element=document.id(this.element.getDocument().body)),this.options.wheelStops){var i=this.element,s=this.cancel.pass(!1,this);this.addEvent("start",function(){i.addEvent("mousewheel",s)},!0),this.addEvent("complete",function(){i.removeEvent("mousewheel",s)},!0)}},set:function(){var t=Array.flatten(arguments);return this.element.scrollTo(t[0],t[1]),this},compute:function(t,e,i){return[0,1].map(function(s){return Fx.compute(t[s],e[s],i)})},start:function(t,e){if(!this.check(t,e))return this;var i=this.element.getScroll();return this.parent([i.x,i.y],[t,e])},calculateScroll:function(t,e){var i=this.element,s=i.getScrollSize(),n=i.getScroll(),o=i.getSize(),a=this.options.offset,h={x:t,y:e};for(var r in h)h[r]||0===h[r]||(h[r]=n[r]),"number"!=typeOf(h[r])&&(h[r]=s[r]-o[r]),h[r]+=a[r];return[h.x,h.y]},toTop:function(){return this.start.apply(this,this.calculateScroll(!1,0))},toLeft:function(){return this.start.apply(this,this.calculateScroll(0,!1))},toRight:function(){return this.start.apply(this,this.calculateScroll("right",!1))},toBottom:function(){return this.start.apply(this,this.calculateScroll(!1,"bottom"))},toElement:function(t,e){e=e?Array.convert(e):["x","y"];var i,s=(i=this.element,/^(?:body|html)$/i.test(i.tagName)?{x:0,y:0}:this.element.getScroll()),n=Object.map(document.id(t).getPosition(this.element),function(t,i){return!!e.contains(i)&&t+s[i]});return this.start.apply(this,this.calculateScroll(n.x,n.y))},toElementEdge:function(t,e,i){e=e?Array.convert(e):["x","y"];var s={},n=(t=document.id(t)).getPosition(this.element),o=t.getSize(),a=this.element.getScroll(),h=this.element.getSize(),r={x:n.x+o.x,y:n.y+o.y};return["x","y"].each(function(t){e.contains(t)&&(r[t]>a[t]+h[t]&&(s[t]=r[t]-h[t]),n[t]<a[t]&&(s[t]=n[t])),null==s[t]&&(s[t]=a[t]),i&&i[t]&&(s[t]=s[t]+i[t])},this),s.x==a.x&&s.y==a.y||this.start(s.x,s.y),this},toElementCenter:function(t,e,i){e=e?Array.convert(e):["x","y"];var s={},n=(t=document.id(t)).getPosition(this.element),o=t.getSize(),a=this.element.getScroll(),h=this.element.getSize();return["x","y"].each(function(t){e.contains(t)&&(s[t]=n[t]-(h[t]-o[t])/2),null==s[t]&&(s[t]=a[t]),i&&i[t]&&(s[t]=s[t]+i[t])},this),s.x==a.x&&s.y==a.y||this.start(s.x,s.y),this}}),Fx.Scroll.implement({scrollToCenter:function(){return this.toElementCenter.apply(this,arguments)},scrollIntoView:function(){return this.toElementEdge.apply(this,arguments)}})}(),null==SK)var SK={};if(null==console)var console={log:function(){}};if(null==SK.Galleries&&(SK.Galleries={Components:{},Plugins:{},Effects:{},Constants:{notificationGeneratingMessage:"Esta galería contiene imágenes que todavía se están generando. Vuelva a cargar la página en unos segundos.",placeholder_width:20,placeholder_padding:149,effects:{reflex:{min_height:30,percents_height:15,opacity:.25},polaroid:{}},slide_duration:1e3,fade_duration:1e3,slideshow:{pages_to_preload:5},thumbnails:{pages_to_preload:1},slider:{pixels_per_second:50,frames_per_second:50,pages_to_preload:2,fast_speed_factor:8},viewer:{pages_to_preload:5},css:{gecko:{},webkit:{}}},Utils:{instances:{},isTouchScreenDevice:function(){return"ontouchstart"in document.documentElement},saveInstance:function(t,e){this.instances["id_"+t]=e},getInstance:function(t){return this.instances["id_"+t]},log:function(){null!=window.console&&"function"==typeOf(window.console.log)&&window.console.log.apply(window.console,arguments)},stringToBool:function(t){switch(!0){case!(null!=t):case!1===t:case"none"==t:return!1;case"true"==t:return!0;case!isNaN(t):return!!Number(t)}return!0},sortSizesByWidth:function(t,e){return t.width.toInt()>e.width.toInt()?1:t.width.toInt()<e.width.toInt()?-1:0},getImageData:function(t,e,i,s,n,o,a){a=a||{x:e,y:i};var h=SK.Util.isRetinaDisplay();h&&(e*=2,i*=2);for(var r=t.original,l=[],u=Object.values(t).filter(function(t){return!!t.src}).sort(this.sortSizesByWidth),d=0,c=u.length;d<c;d++){if(r!=t.original)return n&&l.length&&(r.srcset=l.join()),r;if(o){var p={width:Math.round(o.natural_width*o.width),height:Math.round(o.natural_height*o.height)};if(h&&(p=Object.map(p,function(t){return 2*t})),p.width<e||p.height<i){var m=SK.BackgroundTranslator.translateZoomProperties({width:e,height:i},a,o);p.width=e*SK.Util.fromPercent(m.width),p.height=i*SK.Util.fromPercent(m.height)}u[d].width>=p.width||u[d].height>=p.height?r=u[d]:u[d].width&&l.push(u[d].src+" "+u[d].width+"w")}else(s&&u[d].width>=e&&u[d].height>=i||!s&&(u[d].width>=e||u[d].height>=i))&&(r=u[d]);n&&r!=t.original&&l.push(u[d].src+" "+u[d].width+"w")}return n&&l.length&&(r.srcset=l.join()),r},convertDataType:function(t){for(var e in t)if(null!=t[e]&&0!=t[e]){if(!0!==t[e]&&!1!==t[e])if("array"==typeOf(t[e]));else if("object"==typeOf(t[e]))t[e]=this.convertDataType(t[e]);else if(isNaN(t[e]))switch(!0){case"false"==t[e]:case"none"==t[e]:case""==t[e]:t[e]=!1;break;case"true"==t[e]:t[e]=!0}else t[e]=parseFloat(t[e])}else t[e]=!1;return t},Element:{getClassSelector:function(t){return t.get("class").clean().split(" ").map(function(t){return t.length>0?t.replace(/^/,"."):""}).join("")},getComputedSizeSum:function(t,e){for(var i=0,s=0;s<e.length;s++){var n=t.getComputedStyle(e[s]).toInt();i+=isNaN(n)?0:n}return i},getMarginWidth:function(t){return this.getComputedSizeSum(t,["margin-left","margin-right"])},getMarginHeight:function(t){return this.getComputedSizeSum(t,["margin-top","margin-bottom"])},getBorderWidth:function(t){return this.getComputedSizeSum(t,["border-left-width","border-right-width"])},getBorderHeight:function(t){return this.getComputedSizeSum(t,["border-top-width","border-bottom-width"])},getPaddingWidth:function(t){return this.getComputedSizeSum(t,["padding-left","padding-right"])},getPaddingHeight:function(t){return this.getComputedSizeSum(t,["padding-top","padding-bottom"])},getHorizontalOffsets:function(t){return this.getComputedSizeSum(t,["padding-left","padding-right","margin-left","margin-right","border-left-width","border-right-width"])},getVerticalOffsets:function(t){return this.getComputedSizeSum(t,["padding-top","padding-bottom","margin-top","margin-bottom","border-top-width","border-bottom-width"])}}},PerformanceTest:{tests:{},start:function(t){void 0==this.tests[t]&&(this.tests[t]={start:new Date,end:null,result:null})},end:function(t){this.tests[t]&&null==this.tests[t].end&&(this.tests[t].end=new Date,this.tests[t].result=this.tests[t].end.getTime()-this.tests[t].start.getTime())},dump:function(t){for(test_id in this.tests)SK.Galleries.Utils.log(test_id,"=",this.tests[test_id].result,"ms"),delete this.tests[test_id]}}},!window.location.href.test("gallery_performance_test")))for(var property in SK.Galleries.PerformanceTest)typeOf("function"==SK.Galleries.PerformanceTest[property])&&(SK.Galleries.PerformanceTest[property]=function(){});if(null==SK.Galleries.styleSheets&&(SK.Galleries.styleSheets={styles:new Element("style",{type:"text/css",id:"ig_css_styles"}).inject(document.documentElement.firstChild),index:0,writecss:function(t,e,i){var s=t+" {";for(var n in e)s+=this.createCssProperty(n,e[n]);s+="}",i&&/^@media/.test(i)&&(s=i.clean()+"{"+s+"}"),this.styles.sheet&&this.styles.appendChild(document.createTextNode(s))},createCssProperty:function(t,e){if("string"!=typeOf(e)){var i=(Element.Styles[t.camelCase()]||"@").split(" ");e=Array.convert(e).map(function(t,e){return i[e]?"number"==typeOf(t)?i[e].replace("@",Math.round(t)):t:""}).join(" ")}else e==String(Number(e))&&(e=Math.round(e));return t+":"+e+";"}},null!=SK.Galleries.Constants.css[Browser.name])){var browser_css=SK.Galleries.Constants.css[Browser.name];for(var selector in browser_css)SK.Galleries.styleSheets.writecss(selector,browser_css[selector])}null==SK.Actions&&(SK.Actions={}),null==SK.Actions.Gallery&&(SK.Actions.Gallery={}),SK.Actions.Gallery.onPlaceholderDisplay=function(t,e){var i=SK.Galleries.Utils.getInstance(t.node_id);null!=i&&i.adminActivate()},SK.Actions.Gallery.onPlaceholderHide=function(t,e){var i=SK.Galleries.Utils.getInstance(t.node_id);null!=i&&i.adminDeactivate()},SK.Galleries.Components.ComponentBase=new Class({domNode:null,options:{},bounds:{},initialize:function(t){for(var e in t)this.options[e]=t[e]},inject:function(t){t.appendChild(this.domNode)},appendChild:function(t){this.domNode.appendChild(t)},getDomNode:function(){return _$(this.domNode)},hide:function(){return this.domNode.style.display="none"},show:function(){return this.domNode.style.display="block"},dispatchEvent:function(){this.options.plugin.fireEvent.apply(this.options.plugin,arguments)},addEvent:function(){this.options.plugin.addEvent.apply(this.options.plugin,arguments)},addEvents:function(){this.options.plugin.addEvents.apply(this.options.plugin,arguments)},removeEvent:function(){this.options.plugin.removeEvent.apply(this.options.plugin,arguments)},setConstant:function(){return this.options.plugin.setConstant.apply(this.options.plugin,arguments)},getConstant:function(){return this.options.plugin.getConstant.apply(this.options.plugin,arguments)}}),SK.Galleries.Plugins.PluginBase=new Class({Extends:Events,Implements:[Options],bounds:{events:{}},domNode:null,options:{create_preview:!0,domready_init:!0},created:!1,mainEventName:"gotoItem",List:{},Navigators:{},constants:{},type:null,currentIndex:null,pages:[],playOn:!1,isAdminMode:!1,notifyGenerating:!0,admin:{initialized:!1,activated:!1,resumePlay:!1},preview:{instance:null,wrapperId:null,domNode:null},is_destroyed:!1,initialize:function(t,e){this.setConstant("mediaselector-smartphone","@media screen and (max-width: 600px)"),SK.Galleries.Utils.convertDataType(e.visualization),SK.Galleries.Utils.convertDataType(e.viewer),this.wrapperId=t,SK.Galleries.PerformanceTest.start("setOptions"),this.setOptions(e),SK.Galleries.PerformanceTest.end("setOptions"),this.domNode=_$(t),this.domNode?(this.domNode.addClass("ig-old"),this.instanceId=e.id?e.id:t,SK.Galleries.Utils.saveInstance(this.instanceId,this),this.domNode.addClass("ig-gallery").addClass("ig-type-"+this.type),this.bounds.events.gotoItem=this.gotoItem.bind(this),this.bounds.events.buttonNext=this.next.bind(this),this.bounds.events.buttonPrev=this.previous.bind(this),this.bounds.events.buttonPlay=this.play.bind(this),this.bounds.events.buttonPause=this.pause.bind(this),this.bounds.events.view=this.view.bind(this),this.bounds.events.loadThumbnail=this.loadThumbnail.bind(this),this.bounds.events.generateThumbnail=this.generateThumbnail.bind(this),this.addEvents(this.bounds.events),this.showLoadingAnimation(),this.options.domready_init?this.attachLoadHandler():this.display(),this.addEvent("afterPreload",function(){SK.Galleries.PerformanceTest.end("initialize-"+this.type),SK.Galleries.PerformanceTest.dump()}.bind(this)),this.isAdminMode=Function.attempt(function(){return SK.Singletons.env.get("user_id").toInt()>0},Function.from(!1)),this.notifyGenerating=this.isAdminMode,this.isAdminMode&&(this.addEvent("buttonPause",this.adminHighlightPause.bind(this)),this.options.create_preview&&(this.bounds.events.subscribePreviewMode=this.subscribePreviewMode.delay.bind(this.subscribePreviewMode,0,this),window.addEvent("domready",this.bounds.events.subscribePreviewMode)))):alert("failed to initialize Gallery - "+this.type)},attachLoadHandler:function(){window.addEvent("domready",this.display.bind(this))},showLoadingAnimation:function(){this.domNode.addClass("ig-loading"),this.domNode.setStyle("height",this.options.visualization.thumbnail_size.height)},hideLoadingAnimation:function(){this.domNode.setStyle("height","100%"),this.domNode.removeClass("ig-loading")},display:function(t){SK.Galleries.PerformanceTest.start("initialize-"+this.type),this.created||(SK.Galleries.PerformanceTest.start("createComponents"),this.createComponents(),SK.Galleries.PerformanceTest.end("createComponents"),this.created=!0,this.hideLoadingAnimation()),this.fireEvent(this.mainEventName,[Array.pick([t,0])])},gotoItem:function(t){this.List.gotoItem(t)},syncNavigation:function(t){for(var e in this.Navigators)this.Navigators[e].syncNavigation(t);this.currentIndex=t},createComponents:function(){},inspectStyleOffsets:function(){var t={};for(var e in t.ig_thumbs=this.domNode.getElement(".ig-thumbs"),t.ig_thumb=t.ig_thumbs.getElement(".ig-thumb"),t.ig_img=t.ig_thumb.getElement(".ig-img"),t.img=t.ig_img.getElement("img:not(.ig-spacer)"),t){var i=t[e];this.setConstant(e+"_offset_x",SK.Galleries.Utils.Element.getHorizontalOffsets(i)),this.setConstant(e+"_offset_y",SK.Galleries.Utils.Element.getVerticalOffsets(i)),"ig_thumbs"==e&&(this.setConstant("ig_thumbs_inner_offset_x",SK.Galleries.Utils.Element.getComputedSizeSum(i,["padding-left","padding-right"])),this.setConstant("ig_thumbs_inner_offset_y",SK.Galleries.Utils.Element.getComputedSizeSum(i,["padding-top","padding-bottom"])))}var s=this.getConstant("img_offset_x")+this.options.visualization.thumbnail_size.width,n=this.getConstant("img_offset_y")+this.options.visualization.thumbnail_size.height,o=0;if("reflection"==this.options.visualization.thumbnail_effect){o=n*(SK.Galleries.Constants.effects.reflex.percents_height/100);n+=o=Math.max(o,SK.Galleries.Constants.effects.reflex.min_height)}var a=s+this.getConstant("ig_img_offset_x"),h=n+this.getConstant("ig_img_offset_y"),r=a+this.getConstant("ig_thumb_offset_x"),l=h+this.getConstant("ig_thumb_offset_y");this.setConstant("reflex_height",o),this.setConstant("img_width",s),this.setConstant("img_height",n),this.setConstant("image_width",a),this.setConstant("image_height",h),this.setConstant("thumbnail_width",r),this.setConstant("thumbnail_height",l)},play:function(){this.playOn=!0,this.List.play()},pause:function(){this.playOn=!1,this.List.pause()},next:function(){this.List.gotoNext.apply(this.List,arguments)},previous:function(){this.List.gotoPrevious.apply(this.List,arguments)},view:function(t,e){var i=e.target,s=this.getImageData(t);switch(s.link_type){case"viewer":null==this.viewer?(new Element("div",{id:this.wrapperId+"_viewer"}).inject(document.body),this.viewer=new SK.Galleries.Plugins.Viewer(this.wrapperId+"_viewer",Object.merge({},this.options,{id:this.wrapperId+"_viewer",visualization:{crop:!1,thumbnail_size:s.sizes.original}})),this.viewer.addEvents({onShow:this.viewerShow.bind(this),onHide:this.viewerHide.bind(this)}),this.viewer.display(t,i)):this.viewer.show(t,i)}},setCss:function(t,e,i){var s="#"+this.wrapperId+" ";t=s+t.clean().split(/\s?,\s?/).join(", "+s),SK.Galleries.styleSheets.writecss(t,e,i)},getImageCaption:function(t){return this.getImageData(t).caption},getImageData:function(t){return null==this.options.images[t]?{}:this.options.images[t]},setConstant:function(t,e){null==this.constants[t]&&(this.constants[t]=e)},getConstant:function(t){return this.constants[t]},loadThumbnail:function(t,e){t.apply(this)},generateThumbnail:function(t){this.notifyGenerating&&!this.notificationGenerating&&(this.notificationGenerating=new Element("div",{class:"ig-notification-generating"}).grab(new Element("span",{text:SK.Galleries.Constants.notificationGeneratingMessage})).inject(this.domNode,"before"))},viewerShow:function(){this.fireEvent("viewerShow"),this.viewer.resumePlay=this.playOn,this.playOn&&this.pause()},viewerHide:function(){this.fireEvent("viewerHide"),this.viewer.resumePlay&&this.play(),this.viewer.resumePlay=!1},adminInitialize:function(){this.admin.initialized=!0},adminActivate:function(){!1===this.admin.activated&&(!1===this.admin.initialized&&this.adminInitialize(),this.admin.resumePlay=this.playOn,this.playOn&&this.pause(),this.admin.activated=!0)},adminDeactivate:function(){!0===this.admin.activated&&(this.admin.resumePlay&&this.play(),this.admin.resumePlay=!1,this.admin.activated=!1)},adminHighlightPause:function(){this.admin.highlighted=!1},adminHighlightShow:function(){this.admin.highlighted=this.playOn,this.playOn&&this.pause()},adminHighlightHide:function(){this.admin.highlighted&&this.play(),this.admin.highlighted=!1},subscribePreviewMode:function(){SK.UI.Preview.addEvents({onEnable:function(){if(!this.preview.instance){this.preview.wrapperId=this.wrapperId+"_preview",this.preview.domNode=new Element("div",{id:this.preview.wrapperId}).inject(this.domNode,"after");var t=window["GALLERY_PLUGIN_JSON_"+this.wrapperId.split("_").pop()];if(!t)return;if(!(t=Object.clone(t)).images&&!t.images.length)return;t.images=t.images.filter(function(t){return t.image_attributes.meta.indexOf('"held":0')>0}),this.preview.instance=new this.$constructor(this.preview.wrapperId,Object.append({},t,{create_preview:!1}))}this.hideWrapper(),this.preview.instance.showWrapper()}.bind(this),onDisable:function(){this.preview.instance&&(this.showWrapper(),this.preview.instance.hideWrapper())}.bind(this)})},showWrapper:function(){this.domNode.removeClass("ig-hidden")},hideWrapper:function(){this.domNode.addClass("ig-hidden")},getDOMNode:function(){return this.domNode},getContainerSize:function(){return this.options.visualization.container_size||{x:this.options.visualization.thumbnail_size.width,y:this.options.visualization.thumbnail_size.height}},isDestroyed:function(){return this.is_destroyed},destroy:function(){for(var t in this.removeEvents(this.bounds.events),this.options.create_preview&&window.removeEvent("load",this.bounds.events.subscribePreviewMode),this.domNode.getElements("*").destroy(),this.options)delete this.options[t];return this.domNode.erase("class"),delete this.bounds,delete this.List,delete this.Navigators,this.is_destroyed=!0,this.domNode}}),SK.Galleries.Effects.Reflection=function(t,e){e=Object.append({opacity:.5,container_height:"auto",reflection_height:150},e||{});var i,s;_$(t).getParent();i=e.crop&&t.getStyle("width").toInt()>t.parentNode.getStyle("width").toInt()?t.parentNode.getStyle("width").toInt():t.getStyle("width").toInt(),s=t.getStyle("height").toInt();var n=new Element("canvas");if(n.getContext){try{var o=n.setProperties({width:i,height:e.reflection_height}).getContext("2d");o.save(),o.translate(0,s-1),o.scale(1,-1),o.drawImage(t,0,0,i,s),o.restore(),o.globalCompositeOperation="destination-out";var a=o.createLinearGradient(0,0,0,e.reflection_height);a.addColorStop(0,"rgba(255, 255, 255, "+(1-e.opacity)+")"),a.addColorStop(1,"rgba(255, 255, 255, 1.0)"),o.fillStyle=a,o.rect(0,0,i,e.reflection_height),o.fill()}catch(t){return}t.getParent(".ig-thumb").grab(n)}},SK.Galleries.Components.ComponentButton=new Class({Extends:SK.Galleries.Components.ComponentBase,domNode:null,options:{type:"",className:null,disabledClassName:"ig-disabled",events:{mousedown:null,mouseout:null,mouseover:null,click:null,enable:null,disable:null},events_arguments:{mousedown:[],mouseout:[],mouseover:[],click:[],enable:[],disable:[]},defaultEnabled:!1},className:"",bounds:{events:{}},isDisabled:null,plugin:{},initialize:function(t){this.parent.apply(this,arguments),this.className=this.options.className?this.options.className:"ig-btn ig-"+this.options.type,this.domNode=new Element("div",{class:this.className,style:"-webkit-user-select: none"}),this.bounds.events.mousedown=this.onMousedown.bind(this),this.bounds.events.mouseout=this.onMouseout.bind(this),this.bounds.events.mouseover=this.onMouseover.bind(this),this.bounds.events.click=this.onClick.bind(this),this.options.defaultEnabled&&this.enable()},onMousedown:function(){this.setState("click"),this.dispatchEvent("mousedown")},onMouseout:function(){this.setState("normal"),this.dispatchEvent("mouseout")},onMouseover:function(){this.setState("over"),this.dispatchEvent("mouseover")},onClick:function(t){this.dispatchEvent("click")},setState:function(t){this.state=t,this.domNode.set("class",this.className),"normal"!=t&&this.domNode.addClass("ig-"+t)},disable:function(){!0!==this.isDisabled&&(this.isDisabled=!0,this.domNode.set("class",this.className+" "+this.options.disabledClassName),this.domNode.removeEvents(this.bounds.events),this.dispatchEvent("disable"))},enable:function(){!1!==this.isDisabled&&(this.isDisabled=!1,this.domNode.removeClass(this.options.disabledClassName),this.domNode.addEvents(this.bounds.events),this.dispatchEvent("enable"))},dispatchEvent:function(t){null!=this.options.events[t]&&0!=this.options.events[t]&&this.parent(this.options.events[t],this.options.events_arguments[t])}}),SK.Galleries.Components.ComponentButtonsSet=new Class({Extends:SK.Galleries.Components.ComponentBase,domNode:null,options:{first_item:0,last_item:0,events:{buttonPrev:{},buttonNext:{},buttonPlay:{},buttonPause:{}}},buttons:{},bounds:{events:{}},currentIndex:null,initialize:function(t){this.parent.apply(this,arguments),this.domNode=new Element("div"),this.options.inside_buttons&&(this.buttons.buttonPrev=new SK.Galleries.Components.ComponentButton({plugin:this.options.plugin,type:"prev",events:this.options.events.buttonPrev}),this.buttons.buttonNext=new SK.Galleries.Components.ComponentButton({plugin:this.options.plugin,type:"next",events:this.options.events.buttonNext})),this.options.play_button&&(this.buttons.buttonPlay=new SK.Galleries.Components.ComponentButton({plugin:this.options.plugin,type:"play",events:this.options.events.buttonPlay,defaultEnabled:!0}),this.buttons.buttonPause=new SK.Galleries.Components.ComponentButton({plugin:this.options.plugin,type:"pause",events:this.options.events.buttonPause,defaultEnabled:!0}),this.buttons.buttonPause.hide(),this.addEvents({listPause:function(){this.buttons.buttonPause.hide(),this.buttons.buttonPlay.show()}.bind(this),listPlay:function(){this.buttons.buttonPlay.hide(),this.buttons.buttonPause.show()}.bind(this)}))},getCurrentIndex:function(){return this.currentItemIndex},syncNavigation:function(t){t!=this.currentIndex&&(this.options.inside_buttons&&(this.options.loop?(this.buttons.buttonPrev.enable(),this.buttons.buttonNext.enable()):t==this.options.first_item?(this.buttons.buttonPrev.disable(),this.buttons.buttonNext.enable()):t==this.options.last_item?(this.buttons.buttonPrev.enable(),this.buttons.buttonNext.disable()):(this.buttons.buttonPrev.enable(),this.buttons.buttonNext.enable())),this.currentIndex=t)},inject:function(t){for(var e in this.buttons)this.buttons[e].inject(t)},getComponentsButtons:function(){if(arguments.length>0){for(var t={},e=0;e<arguments.length;e++){var i=arguments[e];this.buttons[i]&&(t[i]=this.buttons[i])}return t}return this.buttons}}),SK.Galleries.Components.ComponentCaption=new Class({Extends:SK.Galleries.Components.ComponentBase,options:{duration:"normal"},initialize:function(t){this.parent.apply(this,arguments),this.captionTextHolder=new Element("div"),this.domNode=new Element("div",{class:"ig-caption"}).grab(this.captionTextHolder),SK.Galleries.Utils.stringToBool(this.options.duration)&&this.captionTextHolder.set("tweenCSS3",{duration:this.options.duration/2,link:"chain",transition:"quart:in:out",onComplete:function(){0==this.captionTextHolder.getStyle("opacity")&&this.captionTextHolder.set("html",this.captionText)}.bind(this)}),this.addEvent("listStart",this.setCaption.bind(this))},setCaption:function(t){this.captionText=this.options.plugin.getImageCaption(t),SK.Galleries.Utils.stringToBool(this.options.duration)?(this.captionTextHolder.tweenCSS3("opacity","0"),this.captionTextHolder.tweenCSS3("opacity","1")):this.captionTextHolder.set("opacity","1")}}),SK.Galleries.Components.ComponentListBase=new Class({Extends:SK.Galleries.Components.ComponentBase,currentIndex:null,itemsCount:1,itemsPerPage:0,options:{pages_to_preload:5},pages:[],notLoadedPages:[],componentsPerPage:{},tumbnailInstances:[],transitionList:{set:Function.from(),play:Function.from(),stop:Function.from(),walk:Function.from()},play:function(){this.transitionList.play(!0)},pause:function(){this.transitionList.stop()},gotoItem:function(t,e,i){if(t!=this.currentIndex){var s=this.currentIndex;this.currentIndex=t,null!=e&&0!=e||(e=t>s||t==this.pages.getLast()?"next":"previous"),this.preloadPages();var n=this.pages.indexOf(this.currentIndex);i?(this.onListStart(n,s),this.transitionList.set(n),this.onListComplete(n)):this.transitionList.walk(n,!0,e)}else i&&this.transitionList.set(t)},getCurrentIndex:function(){return this.currentIndex},getItemsCount:function(){return this.itemsCount},getPageComponents:function(t){return Array.convert(this.componentsPerPage["page_"+t])},setPageComponent:function(t,e){return this.componentsPerPage["page_"+t]=e},preloadPages:function(t){if(0!=this.notLoadedPages.length){this.dispatchEvent("beforePreload"),t=this.pages.indexOf(Array.pick([t,this.currentIndex,this.pages[0]]));var e=[],i=[],s=this.pages.length-1,n=t-this.options.pages_to_preload,o=t+this.options.pages_to_preload+1;2*this.options.pages_to_preload+1>=s?i.push([0]):n>=0&&o<=s?i.push([n,o]):o>=s?(i.push([n]),i.push([0,o-1-s])):n<0&&(i.push([n]),i.push([0,o]));for(var a=0;a<i.length;a++)e=e.concat(this.pages.slice.apply(this.pages,i[a]));var h=this.notLoadedPages.intersect(e);this.loadedPages(h)}},loadedPages:function(t){if(0!=t.length){for(var e=0;e<t.length;e++)this.getPageComponents(t[e]).invoke("loadContent");this.notLoadedPages=this.notLoadedPages.differentiate(t),this.dispatchEvent("afterPreload")}},getPages:function(){return this.pages},calulatePrevNextItemIndex:function(t){var e=this.pages.indexOf(Array.pick([this.currentIndex,this.pages[0]]));return"previous"==t&&0==e&&this.options.loop?this.pages.getLast():"next"==t&&e==this.pages.getLast()&&this.options.loop?this.pages[0]:this.pages[e+("previous"==t?-1:1)]},gotoNext:function(){var t=this.calulatePrevNextItemIndex("next");"number"==typeOf(t)&&this.gotoItem(t,"next")},gotoPrevious:function(){var t=this.calulatePrevNextItemIndex("previous");"number"==typeOf(t)&&this.gotoItem(t,"previous")},createTransitionList:function(t,e){var i=Object.append({type:this.options.thumbnail_transition,interval:1e3*(this.options.slideshow_timeout||5),endlessChain:this.options.loop&&"slide"==this.options.thumbnail_transition&&this.itemsCount>1,onBeforeStart:this.onListBeforeStart.bind(this),onStart:this.onListStart.bind(this),onComplete:this.onListComplete.bind(this),onAfterComplete:this.onListAfterComplete.bind(this),onPlayStop:this.dispatchEvent.bind(this,"listPause"),onPlayStart:this.dispatchEvent.bind(this,"listPlay")},e);this.transitionList=new SK.Galleries.Effects.TransitionList(t,i)},onListBeforeStart:function(t,e){this.dispatchEvent("listBeforeStart",[t,e])},onListStart:function(t,e){this.dispatchEvent("listStart",[t,e])},onListComplete:function(t){t=this.pages[t],this.transitionList.playOn&&(this.currentIndex=t),this.options.plugin.syncNavigation(t),this.preloadPages(t),this.dispatchEvent("listComplete",[t])},onListAfterComplete:function(t){this.dispatchEvent("listAfterComplete",[t])},getArrangementPlaceholder:function(t){return void 0===t?this.options.first_placeholder:this.options.images[t].arrangement_placeholder},getTumbnailInstances:function(){if(0==this.tumbnailInstances.length)for(var t in this.componentsPerPage)this.tumbnailInstances=this.tumbnailInstances.concat(Array.convert(this.componentsPerPage[t]).invoke("getTumbnailInstance"));return this.tumbnailInstances}}),SK.Galleries.Components.ComponentListSlideshow=new Class({Extends:SK.Galleries.Components.ComponentListBase,options:{src_key:"thumb_url",auto_scale:!1,columns:1,rows:1,autoplay:!1,loop:!1},isFirstLoad:!0,createOptionsSet:function(t){return{plugin:this.options.plugin,thumbnail_size:this.options.thumbnail_size,thumbnail_effect:this.options.thumbnail_effect,thumbnail_transition:this.options.thumbnail_transition,caption_visibility:this.options.caption_visibility,item_index:t,image_data:this.options.images[t],src_key:this.options.src_key,auto_scale:this.options.auto_scale,notify_generating:this.options.notify_generating}},gotoItem:function(t,e,i){this.parent.apply(this,arguments),this.isFirstLoad&&this.itemsCount>1&&this.options.autoplay&&this.options.plugin.play(),this.isFirstLoad=!1},onListStart:function(t,e){this.parent.apply(this,arguments),this.options.loop||t!=this.pages[0]||this.pages.getLast()!=e||this.options.plugin.pause()},initialize:function(t){this.parent.apply(this,arguments),this.itemsCount=this.options.images.length,this.domNode=new Element("div",{class:"ig-thumbs"});var e=this.options.loop&&"slide"==this.options.thumbnail_transition&&this.itemsCount>1;this.options.create_placeholders&&this.domNode.appendHTML(this.getArrangementPlaceholder());for(var i=0;i<this.itemsCount;i++){this.pages.push(i);var s=this.createOptionsSet(i),n=new SK.Galleries.Components.ComponentListItem(s);this.setPageComponent(i,n),n.inject(this.domNode),this.options.create_placeholders&&n.domNode.appendHTML(this.getArrangementPlaceholder(i))}if(e){var o=new SK.Galleries.Components.ComponentListItem(this.createOptionsSet(0));o.inject(this.domNode),o.loadContent()}this.notLoadedPages=this.pages},inject:function(){this.domNode.getElements(".ig-thumb").addClass("ig-slide");this.parent.apply(this,arguments)}}),SK.Galleries.Components.ComponentListItem=new Class({Extends:SK.Galleries.Components.ComponentBase,domNode:null,options:{auto_scale:!1,image_data:{image_attributes:{},caption:""},caption_visibility:!1,force_caption_text:!1},initialize:function(t){this.parent.apply(this,arguments),this.processImageAttributes(),this.domNode=new Element("div",this.options.image_data.image_attributes),this.wrapper=new Element("div").inject(this.domNode),this.thumbNode=new Element("div.ig-thumb").inject(this.wrapper),this.thumbnail=new SK.Galleries.Components.ComponentThumbnail(this.options),this.thumbnail.inject(this.thumbNode),(this.options.plugin.options.visualization.caption_visibility||"viewer"===this.options.plugin.type&&this.options.plugin.options.viewer.caption_visibility)&&this.buildCaption()},inject:function(){this.parent.apply(this,arguments)},loadContent:function(){this.thumbnail.loadContent()},processImageAttributes:function(){if(null==this.options.image_data.image_attributes&&(this.options.image_data.image_attributes={}),null==this.options.image_data.image_attributes.id){var t=this.options.image_data.id?this.options.image_data.id:"e"+Type.UID++;this.options.image_data.image_attributes.id=t}},getTumbnailInstance:function(){return this.thumbnail},buildCaption:function(){if((t=this.options.image_data.caption)&&t.length)if(this.options.caption_visibility)new Element("div",{class:"ig-caption"}).grab(new Element("div",{html:t})).inject(this.wrapper);else{var t,e=this.options.plugin.options.visualization.thumbnail_transition;(t=new SK.Galleries.Components.ComponentCaption({plugin:this.options.plugin,duration:SK.Galleries.Constants[e+"_duration"]})).inject(this.wrapper)}}}),SK.Galleries.Components.ComponentNavigation=new Class({Extends:SK.Galleries.Components.ComponentBase,domNode:null,options:{first_item:0,last_item:0},plugin:{},currentIndex:null,buttons:{},cache:{pages:{},selectedElement:null},initialize:function(t){this.parent.apply(this,arguments),this.domNode=new Element("div",{class:"ig-nav"})},inject:function(t){switch(this.parent.apply(this,arguments),this.options.type){case"numbers":this.createNumbers();break;case"buttons":this.createButtons();break;case"buttons_and_numbers":this.createButtonsAndNumbers();break;case"dots":this.createDots()}},syncNavigation:function(t){if(t!=this.currentIndex){var e=this.domNode.getElement("[item_index="+t+"]");e&&"selected"!=e.get("state")&&this.setStateSelected(e,!0),this.buttons.buttonPrev&&this.buttons.buttonNext&&this.setButtonsState(t),this.currentIndex=t}},getCurrentIndex:function(){return this.currentIndex},addElementEvents:function(t){var e={click:this.setStateSelected.bind(this,t,!1),mousedown:this.setStateClicked.bind(this,t),mouseover:this.setStateRollover.bind(this,t),mouseout:this.setStateNormal.bind(this,t)};t.addEvents(e),t.store("element_events",e)},attachElementEvents:function(t){var e=t.retrieve("element_events");t.addEvents(e)},detachElementEvents:function(t){var e=t.retrieve("element_events");t.removeEvents(e)},setElementStateSelected:function(t){t.set("state","selected"),t.addClass("ig-selected")},setStateSelected:function(t,e,i){if(i&&i.stopPropagation(),this.cache.selectedElement){if(this.cache.selectedElement==t)return;this.attachElementEvents(this.cache.selectedElement),this.setStateNormal(this.cache.selectedElement)}if(this.cache.selectedElement=t,this.setElementStateSelected(t),this.detachElementEvents(t),t.get("item_index")&&!e){var s=t.get("item_index").toInt();this.dispatchEvent("gotoItem",s)}},setStateClicked:function(t){t.set("state","clicked"),t.addClass("ig-click")},setStateRollover:function(t){t.set("state","rollover"),t.addClass("ig-over")},setStateNormal:function(t){t.set("state","normal"),t.removeClass("ig-over"),t.removeClass("ig-click"),t.removeClass("ig-selected")},setButtonsState:function(t){this.options.loop?(this.buttons.buttonPrev.enable(),this.buttons.buttonNext.enable()):t==this.options.first_item?(this.buttons.buttonPrev.disable(),this.buttons.buttonNext.enable()):t==this.options.last_item?(this.buttons.buttonPrev.enable(),this.buttons.buttonNext.disable()):(this.buttons.buttonPrev.enable(),this.buttons.buttonNext.enable())},createNumbers:function(){this.domNode.addClass("ig-numbers");for(var t=0;t<this.options.pages.length;t++){var e=new Element("div",{class:"ig-number",item_index:this.options.pages[t]}).grab(new Element("p",{text:t+1})).inject(this.domNode);this.addElementEvents(e)}},createButtons:function(){this.domNode.addClass("ig-buttons"),this.buttons.buttonPrev=new SK.Galleries.Components.ComponentButton({plugin:this.options.plugin,type:"prev",events:{click:"onButtonPrev"},className:"ig-btn ig-prev"}),this.buttons.buttonPrev.inject(this.domNode),this.buttons.buttonNext=new SK.Galleries.Components.ComponentButton({plugin:this.options.plugin,type:"next",events:{click:"onButtonNext"},className:"ig-btn ig-next"}),this.buttons.buttonNext.inject(this.domNode)},createButtonsAndNumbers:function(){this.domNode.addClass("ig-buttons-nums"),this.buttons.buttonPrev=new SK.Galleries.Components.ComponentButton({plugin:this.options.plugin,type:"prev",events:{click:"onButtonPrev"},className:"ig-btn ig-prev"}),this.buttons.buttonPrev.inject(this.domNode);var t=new Element("div",{class:"ig-num ig-num1",text:"1"});this.domNode.grab(t),this.domNode.grab(new Element("div",{class:"ig-num ig-delim",text:"/"})),this.domNode.grab(new Element("div",{class:"ig-num ig-num2",text:this.options.pages.length})),this.buttons.buttonNext=new SK.Galleries.Components.ComponentButton({plugin:this.options.plugin,type:"next",events:{click:"onButtonNext"},className:"ig-btn ig-next"}),this.buttons.buttonNext.inject(this.domNode),this.addEvent("listComplete",function(t){this.element.set("text",this.pages.indexOf(t)+1)}.bind({pages:this.options.pages,element:t}))},createDots:function(){this.domNode.addClass("ig-dots");for(var t=0;t<this.options.pages.length;t++){var e=new Element("div",{class:"ig-dot",item_index:this.options.pages[t]}).inject(this.domNode);this.addElementEvents(e)}}}),SK.Galleries.Components.ComponentThumbnail=new Class({Extends:SK.Galleries.Components.ComponentBase,domNode:null,options:{auto_scale:!1,image_data:{},src_key:"thumb_url",thumbnail_effect:!1,notify_generating:!1},plugin:{},imageSource:null,imageSourceStatus:"loading",canvasSize:{width:null,height:null},imageSize:{width:null,height:null},initialize:function(t){var e="viewer"==t.plugin.type?{width:t.plugin.domNode.getStyle("width").toInt(),height:t.plugin.domNode.getStyle("height").toInt()}:t.plugin.options.visualization.thumbnail_size;if(this.parent.apply(this,arguments),this.imageData=SK.Galleries.Utils.getImageData("viewer"==t.plugin.type?this.options.image_data.sizes:this.options.image_data.custom_sizes||this.options.image_data.sizes,e.width,e.height,t.plugin.options.visualization.crop,!0,t.image_data.zoom),this.imagerSrcSet=this.imageData.srcset,this.imageSource=this.imageData.src,(this.imageSource||"").test(/\.000$/)&&(this.imageSourceStatus="generating",this.options.notify_generating&&this.dispatchEvent("generateThumbnail",[this])),this.domNode=new Element("div"),this.anchor=new Element("a"),this.spacer=new Element("img",{src:"/Shared/Images/space.gif"}),this.is_zoomed=this.hasZoom(t.image_data),this.is_zoomed&&(this.zoom_spacer=this.spacer.clone().setProperties({class:"ig-zoom-spacer"})),this.spacer.setProperty("class","ig-spacer"),this.spacer.setStyles({position:"relative",width:t.thumbnail_size.width,height:0,paddingBottom:SK.Util.toPercent(t.thumbnail_size.height.toInt()/t.thumbnail_size.width.toInt())}),t.plugin.options.visualization.crop&&!this.is_zoomed){var i=this.imageData.width/this.imageData.height,s=e.width.toInt()/e.height.toInt();this.image=new Element("img",{styles:{"max-width":i<s?"100%":"none","max-height":i>=s?"100%":"none"}});var n={"max-width":e.width,height:e.height};this.cropWrapper=new Element("div",{class:"ig-crop-wrapper",styles:n})}else this.domNode.setStyles({"max-width":e.width}),this.image=new Element("img",{styles:{"max-height":e.height}});(this.cropWrapper?this.cropWrapper.grab(this.spacer):this.spacer).inject(this.domNode),this.is_zoomed&&this.zoom_spacer.inject(this.domNode)&&this.setZoomProperties(),this.domNode.className="ig-img",this.domNode.addClass("ig-"+this.imageSourceStatus),this.domNode.appendChild(this.image),this.domNode.appendChild(this.anchor),this.bounds.events={load:this.onImageLoad.bind(this),click:this.onImageClick.bind(this),error:this.onImageError.bind(this)},this.image.addEvents(this.bounds.events)},loadContent:function(){this.dispatchEvent("loadThumbnail",[this.setSource.bind(this),this.domNode])},setSource:function(){this.image.src=this.imageSource,this.image.setProperty("srcset",this.imagerSrcSet)},setSizesAttribute:function(){var t=this.domNode.getStyle("width").toInt();if(t){var e=this.options.plugin.options.visualization.crop&&!this.is_zoomed?"max-width":"min-height";this.image.setProperty("sizes",["(-webkit-min-device-pixel-ratio: 2) and (max-width: ",t,"px) 100vw,","(-webkit-min-device-pixel-ratio: 2) ",2*t,"px,","(",e,": ",t,"px) ",t,"px"].join(""))}},setZoomProperties:function(){this.domNode.setStyles({position:"relative",overflow:"hidden"});var t=this.options.plugin.options.container_ratio||this.options.thumbnail_size.height.toInt()/this.options.thumbnail_size.width.toInt();this.zoom_spacer.setStyles({width:this.options.thumbnail_size.width,paddingBottom:SK.Util.toPercent(t)});var e=this.translateZoomProperties(this.options.image_data.zoom);this.image.setStyles(Object.append({position:"absolute",maxHeight:"",maxWidth:"none"},e)),this.image.store("css:transform",e.transform)},translateZoomProperties:function(t){var e=SK.BackgroundTranslator.translateZoomProperties(this.options.thumbnail_size,this.options.plugin.getContainerSize(),t,!this.options.plugin.options.is_stretch_enabled);return delete e[window.innerWidth/window.innerHeight>1.4?"height":"width"],e},inject:function(){this.parent.apply(this,arguments),this.setSizesAttribute.delay(0,this)},onImageLoad:function(){this.imageSize={width:this.image.width,height:this.image.height},this.loaded=!0,this.options.auto_scale&&this.scaleImage(),""!=this.options.image_data.link_url&&(this.image.inject(this.anchor),this.anchor.set({href:this.options.image_data.link_url,target:this.options.image_data.link_target})),this.spacer.parentNode&&(""!=this.options.image_data.link_url?this.anchor.replaces(this.spacer):this.image.replaces(this.spacer)),this.image.setAttribute("alt",this.options.image_data.alt||this.options.image_data.caption||this.getImageFilename()),this.domNode.setStyles({width:"",height:""}),SK.Galleries.Utils.stringToBool(this.options.thumbnail_effect)&&this.addEffect(this.options.thumbnail_effect),this.image.set("tweenCSS3",{duration:1e3,transition:"sine:out"}),this.image.set("opacity","0"),this.domNode.className="ig-img",this.image.tweenCSS3("opacity","1")},onImageError:function(){},onImageClick:function(t){this.dispatchEvent("view",[this.options.item_index,t])},addEffect:function(t){if("reflection"==t){var e={opacity:SK.Galleries.Constants.effects.reflex.opacity,container_height:this.getConstant("img_height"),reflection_height:this.getConstant("reflex_height"),crop:this.options.plugin.options.visualization.crop};SK.Galleries.Effects.Reflection(this.image,e)}},setCanvasSize:function(t,e){this.canvasSize={width:t,height:e},this.options.auto_scale&&this.loaded&&this.scaleImage()},scaleImage:function(){var t=this.getImageSize();this.image.width=t.width,this.image.height=t.height},getImageSize:function(){var t={};for(size in this.options.image_data.sizes)this.options.image_data.sizes[size].src===this.imageSource&&(t.width=this.options.image_data.sizes[size].width,t.height=this.options.image_data.sizes[size].height);this.options.src_key.replace("_url","");var e={width:null!=this.imageSize.width?this.imageSize.width:t.width,height:null!=this.imageSize.height?this.imageSize.height:t.height};if(this.canvasSize.width<e.width||this.canvasSize.height<e.height){var i=this.canvasSize.width/e.width,s=this.canvasSize.height/e.height;i*e.height<=this.canvasSize.height?(e.width=Math.ceil(i*e.width),e.height=Math.ceil(i*e.height)):(e.width=Math.ceil(s*e.width),e.height=Math.ceil(s*e.height))}return e},getImageFilename:function(){return this.imageData.src.split("/").pop().split("#").shift()},hasZoom:function(t){return!!t.zoom}}),SK.Galleries.Plugins.Slideshow=new Class({Extends:SK.Galleries.Plugins.PluginBase,type:"slideshow",mainEventName:"gotoItem",options:{visualization:{thumbnail_size:{width:600,height:400},caption_visibility:!0,navigation:"dots",inside_buttons:!0,thumbnail_transition:"slide",thumbnail_effect:!1,play_button:!0,autoplay:!1,slideshow_timeout:5,loop:!0},images:[]},initialize:function(t,e){this.parent(t,e);var i=this.options.visualization.thumbnail_effect;this.domNode.addClass("ig-effect-"+(0==i?"none":i))},createComponents:function(){this.parent(),SK.Galleries.PerformanceTest.start("createComponentListSlideshow");var t={plugin:this,thumbnail_size:this.options.visualization.thumbnail_size,thumbnail_transition:this.options.visualization.thumbnail_transition,thumbnail_effect:this.options.visualization.thumbnail_effect,autoplay:this.options.visualization.autoplay,slideshow_timeout:this.options.visualization.slideshow_timeout,loop:this.options.visualization.loop,caption_visibility:!1,images:this.options.images,src_key:"thumb_url",auto_scale:!1,notify_generating:this.notifyGenerating,pages_to_preload:SK.Galleries.Constants.slideshow.pages_to_preload,first_placeholder:this.options.first_arrangement_placeholder,create_placeholders:null!=this.options.first_arrangement_placeholder};if(this.List=new SK.Galleries.Components.ComponentListSlideshow(t),this.List.inject(this.domNode),SK.Galleries.PerformanceTest.end("createComponentListSlideshow"),SK.Galleries.PerformanceTest.start("inspectStyleOffsets"),this.inspectStyleOffsets(),SK.Galleries.PerformanceTest.end("inspectStyleOffsets"),SK.Galleries.PerformanceTest.start("setGalleryDimensions"),this.setGalleryDimensions(),SK.Galleries.PerformanceTest.end("setGalleryDimensions"),SK.Galleries.PerformanceTest.start("createTransitionList"),this.createTransitionList(),SK.Galleries.PerformanceTest.end("createTransitionList"),this.List.getItemsCount()>1){if(this.pages=this.List.getPages(),this.options.visualization.inside_buttons||this.options.visualization.play_button){SK.Galleries.PerformanceTest.start("createComponentButtonsSet");var e={plugin:this,first_item:this.pages[0],last_item:this.pages.getLast(),inside_buttons:this.options.visualization.inside_buttons,play_button:this.options.visualization.play_button,autoplay:this.options.visualization.autoplay,loop:this.options.visualization.loop,events:{buttonPrev:{click:"onButtonPrev"},buttonNext:{click:"onButtonNext"},buttonPlay:{click:"onButtonPlay"},buttonPause:{click:"onButtonPause"}}};this.Navigators.ButtonsSet=new SK.Galleries.Components.ComponentButtonsSet(e);var i=this.List.getDomNode();this.Navigators.ButtonsSet.inject(i),SK.Galleries.PerformanceTest.end("createComponentButtonsSet"),SK.Galleries.PerformanceTest.start("setButtonPosition");this.getConstant("thumbnail_height");"reflection"==this.options.visualization.thumbnail_effect&&this.getConstant("reflex_height");var s=this.Navigators.ButtonsSet.getComponentsButtons();for(var n in s){var o=s[n].getDomNode(),a=Element.getComputedStyle(o,"height").toInt();if("buttonPrev"==n||"buttonNext"==n){var h=a/-2;this.setCss({buttonPrev:".ig-thumbs div.ig-prev",buttonNext:".ig-thumbs div.ig-next"}[n],{"margin-top":h},this.getConstant("mediaselector-smartphone")),"reflection"==this.options.visualization.thumbnail_effect&&(h-=this.getConstant("reflex_height")/2),this.setCss({buttonPrev:".ig-thumbs .ig-prev",buttonNext:".ig-thumbs .ig-next"}[n],{"margin-top":h})}else{var r;switch(this.setCss({buttonPlay:"div.ig-play",buttonPause:"div.ig-pause"}[n],{"margin-bottom":0},this.getConstant("mediaselector-smartphone")),this.options.visualization.thumbnail_effect){case"reflection":r=this.getConstant("reflex_height")}r&&this.setCss({buttonPlay:".ig-play",buttonPause:".ig-pause"}[n],{"margin-bottom":r})}}SK.Galleries.PerformanceTest.end("setButtonPosition")}if(this.options.visualization.navigation){SK.Galleries.PerformanceTest.start("createComponentNavigation");var l={plugin:this,first_item:this.pages[0],last_item:this.pages.getLast(),pages:this.pages,type:this.options.visualization.navigation,loop:this.options.visualization.loop};this.Navigators.Navigation=new SK.Galleries.Components.ComponentNavigation(l),this.Navigators.Navigation.inject(this.domNode),SK.Galleries.PerformanceTest.end("createComponentNavigation")}}"reflection"==this.options.visualization.thumbnail_effect&&this.options.visualization.caption_visibility&&this.domNode.getElements(".ig-caption").setStyles({height:this.getConstant("reflex_height")}),SK.Galleries.Utils.isTouchScreenDevice()&&(this.options.visualization.inside_buttons||this.options.visualization.navigation)&&this.List.getDomNode().addEvent("swipe",function(t){"right"==t.direction?this.previous():this.next()}.bind(this)),this.options.visualization.crop&&this.setCss(".ig-crop-wrapper",{"padding-bottom":this.getConstant("thumbnail_height")/this.getConstant("thumbnail_width")*100+"%",height:"0 !important"},"@media screen and (max-width: 1024px)")},createTransitionList:function(){var t=this.domNode.getElements(".ig-slide").getParent().getParent();this.List.createTransitionList(t),this.options.first_arrangement_placeholder&&t.forEach(function(t){var e=t.getElement(".sk-obj-placeholder-wrapper");e&&t.grab(e,"after")})},setGalleryDimensions:function(){this.setCss(".ig-thumbs",{"max-width":this.getConstant("thumbnail_width")}),this.setCss(".ig-thumb",{"max-height":this.getConstant("thumbnail_height")})}}),SK.Galleries.Plugins.SlideshowAnimated=new Class({Extends:SK.Galleries.Plugins.Slideshow,type:"slideshow-animated",storage:{},captionOptions:{},options:{visualization:{caption_offset:{left:0,top:0}}},durations:{none:{In:0,Out:0},slide:{In:1e3,Out:500},fade:{In:1e3,Out:500}},initialize:function(t,e,i){for(var s in e.visualization.caption_visibility="0",e.visualization.thumbnail_effect="none",i&&(e.domready_init=!1,e.is_stretch_enabled=!!i.is_stretch_enabled,e.container_ratio=i.container_ratio),this.storage=$H(),this.bounds.events.listComplete=this.startIn.bind(this),this.bounds.events.listBeforeStart=this.startOut.bind(this),this.bounds.captionClick=this.captionClick.bind(this),this.bounds.animationComplete=this.animationComplete.bind(this),this.parent(t,e),this.options.visualization.caption_offset)isNaN(this.options.visualization.caption_offset[s])&&(this.options.visualization.caption_offset[s]=0);this.options.visualization.thumbnail_transition.indexOf("zoom")>-1&&this.domNode.addClass("ig-zoom")},createComponents:function(){this.parent(),SK.Galleries.PerformanceTest.start("createCaptions"),this.createCaptions(),SK.Galleries.PerformanceTest.end("createCaptions"),this.List.getItemsCount()>1&&this.moveNavigation(),this.domNode.setStyle("max-width",this.options.visualization.thumbnail_size.width)},createCaptions:function(){for(var t=this.options.images.length,e=this.List.getDomNode(),i=0;i<t;i++){var s=Array.pick([this.getImageData(i).caption,""]),n=document.createElement("div"),o=new Element("div",{class:"ig-caption"});n.innerHTML=s,o.addEvent("click",this.bounds.captionClick),o.appendChild(n),e.appendChild(o),this.saveTypeByIndex(i,"caption",o)}},captionClick:function(t){this.view(this.currentIndex,t)},startIn:function(t){this.buildStyleObject(t);var e=this.getTypeByIndex(t,"styles"),i=this.getTypeByIndex(t,"caption");this.hasTypeByIndex(t,"prepared")||(this.saveTypeByIndex(t,"prepared",!0),i.setStyles(e.Initial),i.set("morphCSS3",{link:"chain",transition:"quart:in:out"})),i.get("morphCSS3").removeEvents().cancel(),i.set("morphCSS3",{unit:"%",duration:this.durations[e.animation].In,onComplete:function(){}}).morphCSS3(e.In)},startOut:function(t,e){if(this.hasTypeByIndex(e,"prepared")){var i=this.getTypeByIndex(e,"styles"),s=this.getTypeByIndex(e,"caption");s.get("morphCSS3").removeEvents().cancel(),s.set("morphCSS3",{unit:"%",duration:this.durations[i.animation].Out,onComplete:this.bounds.animationComplete.bind(this,e)}).morphCSS3(i.Out)}},animationComplete:function(t){var e=this.getTypeByIndex(t,"styles");this.getTypeByIndex(t,"caption").setStyles(e.Initial)},buildStyleObject:function(t){if(!this.hasTypeByIndex(t,"styles")){var e=this.getImageData(t),i=Object.clone(this.captionOptions);if(null!=e.caption_offset)for(var s in e.caption_offset){var n=e.caption_offset[s];Number(n)==parseFloat(n)&&(i["offset_"+s]=Number(n))}var o=i.version?this.options.visualization.thumbnail_size.width:this.getConstant("thumbnail_width"),a=i.version?this.options.visualization.thumbnail_size.height:this.getConstant("thumbnail_height"),h={Initial:{display:"none",width:SK.Util.toPercent((o-i.offset_left-20)/o),left:SK.Util.toPercent(i.offset_left/o),top:SK.Util.toPercent(i.offset_top/a)},In:{display:"block",left:SK.Util.toPercent(i.offset_left/o),top:SK.Util.toPercent(i.offset_top/a)},Out:{left:SK.Util.toPercent(i.offset_left/o),top:SK.Util.toPercent(i.offset_top/a)},animation:"none"};SK.Galleries.Utils.stringToBool(e.caption_animation)&&(i.animation=e.caption_animation.clean());var r=SK.Util.decodeJSON(i.animation);if(r&&null!=r.transitions&&(r.transitions.contains("fade")?(h.animation="fade",h.Initial.display="none",h.Initial.opacity=0,h.In.display="block",h.In.opacity="1",h.Out.opacity="0"):h.animation="slide"),r&&null!=r.direction){var l=r.direction.split("-").associate(["Initial","Out"]),u=this.getConstant("transitions_delta")[h.animation];for(state_name in l){switch(l[state_name]){case"up":h[state_name].top=h.In.top.toInt()-u.Initial.y/this.getConstant("thumbnail_height")*100+"%",h[state_name].left=h.In.left;break;case"down":h[state_name].top=h.In.top.toInt()+u[state_name].y/this.getConstant("thumbnail_height")*100+"%",h[state_name].left=h.In.left;break;case"left":h[state_name].top=h.In.top,h[state_name].left=h.In.left.toInt()-u[state_name].x/this.getConstant("thumbnail_width")*100+"%";break;case"right":h[state_name].top=h.In.top,h[state_name].left=h.In.left.toInt()+u[state_name].x/this.getConstant("thumbnail_width")*100+"%"}}}this.saveTypeByIndex(t,"styles",h)}},inspectStyleOffsets:function(){this.parent(),this.captionOptions={offset_left:this.options.visualization.caption_offset.left,offset_top:this.options.visualization.caption_offset.top,animation:this.options.visualization.caption_animation,version:this.options.visualization.caption_offset.v?this.options.visualization.caption_offset.v:0};var t={slide:{Initial:{x:this.getConstant("thumbnail_width"),y:this.getConstant("thumbnail_height")},Out:{x:this.getConstant("thumbnail_width"),y:this.getConstant("thumbnail_height")}},fade:{Initial:{x:100,y:50},Out:{x:100,y:50}},none:{Initial:{x:0,y:0},Out:{x:0,y:0}}};this.setConstant("transitions_delta",t)},setGalleryDimensions:function(){this.parent(),this.setCss(".ig-thumbs",{overflow:"hidden"})},moveNavigation:function(){if(this.options.visualization.navigation){var t=this.options.visualization.navigation_position.split("_").associate(["vertical","horizontal"]);this.Navigators.Navigation.getDomNode().addClass("ig-nav-"+t.vertical),this.Navigators.Navigation.getDomNode().addClass("ig-nav-"+t.horizontal),"center"===t.horizontal&&this.Navigators.Navigation.getDomNode().setStyle("margin-left",-this.Navigators.Navigation.getDomNode().clientWidth/2)}},createTransitionList:function(){this.List.createTransitionList(this.domNode.getElements(".ig-slide").getParent().getParent(),{delayStart:500,delayAfterComplete:1e3,stopOnManualTransition:!1,applyCurrentItemHeight:!1})},saveTypeByIndex:function(t,e,i){this.storage.set(e+"_"+t,i)},getTypeByIndex:function(t,e){return this.storage.get(e+"_"+t)},hasTypeByIndex:function(t,e){return this.storage.has(e+"_"+t)},destroy:function(){for(var t=this.options.images.length,e=0;e<t;e++)this.getTypeByIndex(e,"caption").destroy();delete this.storage,this.parent()}}),SK.Galleries.Plugins.Viewer=new Class({Extends:SK.Galleries.Plugins.PluginBase,type:"viewer",mainEventName:"gotoItem",overlayOpacity:.33,animationOptions:{overlay:{show:{transition:"sine:out",duration:600,onComplete:null},hide:{transition:"sine:in",duration:0,onComplete:null}},clone:{show:{transition:"sine:out",duration:200,onComplete:null},hide:{transition:"sine:in",duration:0,onComplete:null}},body:{show:{transition:"sine:out",duration:400,onComplete:null},hide:{transition:"sine:in",duration:0,onComplete:null}}},currentIndex:0,storage:{},drag:null,options:{viewer:{zoom:!1,inside_buttons:!1,caption_visibility:!0,loop:!0,play_button:!1,navigation:"buttons_and_numbers",dim_lights:!0,autoplay:!1,slideshow_timeout:5,size_behaviour:"resizable",width:800,height:400},images:[]},fx:{},initialize:function(){this.bounds.viewerKeydown=this.onKeyDown.bind(this),"static"==this.options.viewer.size_behaviour?this.bounds.viewerResize=this.onResizeStatic.bind(this):this.bounds.viewerResize=this.onResize.bind(this),this.bounds.events.listStart=this.closeZoomOnStart.bind(this),this.bounds.zoomLoad=this.zoomLoad.bind(this),this.bounds.zoomMove=this.zoomMove.bind(this),this.bounds.zoomClose=this.zoomClose.bind(this),this.createAnimationEvents(),this.parent.apply(this,arguments),this.notifyGenerating=!1,this.options.viewer.dim_lights||(this.overlayOpacity=.01,this.animationOptions.overlay.show.duration=1,this.animationOptions.overlay.hide.duration=1),this.storage.largeImageCache=new Element("img",{events:{load:this.onLargeImageLoad.bind(this)}})},display:function(t,e){SK.Galleries.PerformanceTest.start("initialize-"+this.type),this.created||(SK.Galleries.PerformanceTest.start("createComponents"),this.createComponents(),SK.Galleries.PerformanceTest.end("createComponents"),this.created=!0,this.hideLoadingAnimation()),this.show(t,e)},attachLoadHandler:function(){},showLoadingAnimation:function(){},hideLoadingAnimation:function(){},closeZoomOnStart:function(){this.zoomHolder.retrieve("shown")&&this.zoomClose()},createComponents:function(){this.parent(),this.domNode.set("class","ig-viewer ig-viewer-old"),this.domNode.setStyles({opacity:0,visibility:"hidden"}),this.zoomHolder=new Element("div",{class:"ig-viewer-zoom"}).hide(),this.viewerPanel=new Element("div",{class:"ig-viewer-panel"}),this.navigationHolder=new Element("div",{class:"ig-viewer-nav"}),this.closeButton=new Element("div",{class:"ig-viewer-close"}),this.viewerBody=new Element("div",{class:"ig-viewer-waypoint"}).inject(this.domNode).grab(new Element("div",{styles:{position:"relative"}}).grab(this.closeButton)),this.overlay=new Element("div",{class:"ig-overlay",styles:{opacity:0,visibility:"visible",height:0,overflow:"hidden"}}).inject(document.body),this.computeSize(),this.domNode.setStyles(this.getBoxStyles()),this.closeButton.addEvent("click",this.hide.bind(this)),this.overlay.addEvent("click",this.hide.bind(this)),this.options.images.each(function(t){delete t.zoom});var t={plugin:this,thumbnail_size:this.options.visualization.thumbnail_size,thumbnail_transition:"fade",slideshow_timeout:this.options.viewer.slideshow_timeout,autoplay:this.options.viewer.autoplay,thumbnail_effect:!1,loop:this.options.viewer.loop,caption_visibility:!1,images:this.options.images,src_key:"large_url",auto_scale:!0,notify_generating:this.notifyGenerating,full_src:"full_url",pages_to_preload:SK.Galleries.Constants.viewer.pages_to_preload};if(this.List=new SK.Galleries.Components.ComponentListSlideshow(t),this.List.inject(this.viewerBody),this.options.viewer.navigation&&this.viewerBody.grab(this.viewerPanel.grab(this.navigationHolder)),this.tumbnailInstances=this.List.getTumbnailInstances(),this.List.getItemsCount()>1){if(this.pages=this.List.getPages(),this.options.viewer.inside_buttons||this.options.viewer.play_button){var e={plugin:this,first_item:this.pages[0],last_item:this.pages.getLast(),inside_buttons:this.options.viewer.inside_buttons,play_button:this.options.viewer.play_button,autoplay:this.options.viewer.autoplay,loop:this.options.viewer.loop,events:{buttonPrev:{click:"onButtonPrev"},buttonNext:{click:"onButtonNext"},buttonPlay:{click:"onButtonPlay"},buttonPause:{click:"onButtonPause"}}};this.Navigators.ButtonsSet=new SK.Galleries.Components.ComponentButtonsSet(e),this.Navigators.ButtonsSet.inject(this.List.getDomNode())}if(this.options.viewer.navigation){var i={plugin:this,pages:this.pages,first_item:this.pages[0],last_item:this.pages.getLast(),type:this.options.viewer.navigation,loop:this.options.viewer.loop};this.Navigators.Navigation=new SK.Galleries.Components.ComponentNavigation(i),this.Navigators.Navigation.inject(this.navigationHolder),this.viewerPanel.addClass("ig-viewer-panel-with-navigation")}}this.inspectStyleOffsets(),this.setGalleryDimensions(),this.List.createTransitionList(this.domNode.getElements(".ig-thumb").getParent().getParent()),this.zoomHolder.inject(this.viewerBody),this.bigImage=new Element("img").hide().addEvent("load",this.bounds.zoomLoad).inject(this.zoomHolder),SK.Galleries.Utils.isTouchScreenDevice()&&(this.options.visualization.inside_buttons||this.options.visualization.navigation)&&this.List.getDomNode().addEvent("swipe",function(t){"right"==t.direction?this.previous():this.next()}.bind(this))},inspectStyleOffsets:function(){this.parent();var t=0;(this.options.viewer.caption_visibility||this.options.viewer.navigation)&&(t=this.viewerPanel.getDimensions({computeSize:!0,styles:["border","padding","margin"]}).totalHeight||0);this.setConstant("viewer_panel_height",t)},computeSize:function(){var t;t="static"==this.options.viewer.size_behaviour?["border","padding"]:["border","padding","margin"];var e=this.domNode.getDimensions({computeSize:!0,styles:t});e.x=e.computedLeft+e.computedRight,e.y=e.computedBottom+e.computedTop,this.setConstant("viewer_size",e)},setGalleryDimensions:function(){var t=this.getBoxStyles(),e=t.width,i=t.height-this.getConstant("viewer_panel_height");this.storage.canvasSize={width:e-this.getConstant("ig_thumbs_offset_x"),height:i-this.getConstant("ig_thumbs_offset_y")},this.tumbnailInstances.invoke("setCanvasSize",e,i),this.setCss(".ig-viewer-zoom, .ig-img",{width:this.storage.canvasSize.width,height:this.storage.canvasSize.height}),this.setCss(".ig-slide",{width:this.storage.canvasSize.width})},getBoxSize:function(){return"static"==this.options.viewer.size_behaviour?{x:this.options.viewer.width+this.getConstant("viewer_size").x,y:this.options.viewer.height+this.getConstant("viewer_size").y}:window.getSize()},getBoxStyles:function(){var t=this.getBoxSize(),e={width:t.x-this.getConstant("viewer_size").x,height:t.y-this.getConstant("viewer_size").y};return"static"==this.options.viewer.size_behaviour?(e.marginLeft=-t.x/2,e.marginTop=-t.y/2):(e.left=0,e.top=0),e},view:function(t,e){if(this.options.viewer.zoom){e=new DOMEvent(e),this.pause(),this.drag||(this.drag=new Drag(this.bigImage,{modifiers:{x:"left",y:"top"},grid:1,onComplete:this.bounds.zoomMove,onCancel:this.bounds.zoomClose}));var i=e.target.getCoordinates();window.getScroll();this.storage.clickOffsetsRatios={x:(e.event.offsetX?e.event.offsetX:e.event.pageX-i.left)/e.target.getWidth(),y:(e.event.offsetY?e.event.offsetY:e.event.pageY-i.top)/e.target.getHeight()};var s=this.getImageData(t);this.List.hide(),this.zoomHolder.addClass("ig-loading").show("block"),this.bigImage.show("block").set("src","").set("src",s.sizes.original.src)}},onResize:function(){var t=window.getSize();this.overlay.setStyles({width:t.x,height:t.y});var e=this.getBoxStyles();this.domNode.setStyles(e),this.setGalleryDimensions(),this.setZoomRectangle(),this.List.gotoItem(this.currentIndex,null,!0)},onResizeStatic:function(){var t=window.getSize();this.overlay.setStyles({width:t.x,height:t.y})},onKeyDown:function(t){switch(t.key){case"backspace":case"left":this.previous();break;case"space":case"right":this.next();break;case"esc":this.hide();break;default:return}t.preventDefault()},createAnimationEvents:function(){this.animationOptions.overlay.show.onComplete=this.overlayShowComplete.bind(this),this.animationOptions.overlay.hide.onComplete=this.overlayHideComplete.bind(this),this.animationOptions.clone.show.onComplete=this.cloneShowComplete.bind(this),this.animationOptions.clone.hide.onComplete=this.cloneHideComplete.bind(this),this.animationOptions.body.show.onComplete=this.bodyShowComplete.bind(this),this.animationOptions.body.hide.onComplete=this.bodyHideComplete.bind(this)},applyAnimationOptions:function(t){this.fx.overlay=new Fx.Tween.CSS3(this.overlay,{duration:this.animationOptions.overlay[t].duration,transition:this.animationOptions.overlay[t].transition,onComplete:this.animationOptions.overlay[t].onComplete,link:"cancel"}),this.cloneElement.set("morphCSS3",{duration:this.animationOptions.clone[t].duration,transition:this.animationOptions.clone[t].transition,onComplete:this.animationOptions.clone[t].onComplete}),this.fx.domNode=new Fx.Tween.CSS3(this.domNode,{duration:this.animationOptions.body[t].duration,transition:this.animationOptions.body[t].transition,onComplete:this.animationOptions.body[t].onComplete,link:"chain"})},cloneShowComplete:function(){this.storage.cloneShowComplete=!0,this.storage.largeImageCached&&this.startViewerBodyAnimation()},onLargeImageLoad:function(){this.storage.largeImageCached=!0,this.storage.cloneShowComplete&&this.startViewerBodyAnimation()},startViewerBodyAnimation:function(){this.storage.largeImageCached=!1,this.storage.cloneShowComplete=!1,this.domNode.setStyles({opacity:"0",visibility:"visible",display:""}),this.List.gotoItem(this.currentIndex,null,!0),this.domNode.addClass("ig-viewer-animation"),this.fx.domNode.stop(),this.fx.domNode.start("opacity","1")},bodyShowComplete:function(){this.domNode.removeClass("ig-viewer-animation"),this.storage.largeImageCache.src="",this.cloneElement.dispose(),this.fx.overlay.stop(),this.fx.overlay.start("opacity",this.overlayOpacity),this.fireEvent("show")},overlayShowComplete:function(){},overlayHideComplete:function(){this.overlay.setStyles({height:0,top:""}),this.domNode.setStyles({opacity:0,visibility:"hidden",display:"none"}),this.zoomHolder.hide(),this.List.show(),this.fireEvent("hide")},bodyHideComplete:function(){},cloneHideComplete:function(){},show:function(t,e){this.addViewerEvents(),this.currentIndex=t,this.closed=!1;var i=window.getSize();this.overlay.setStyles({width:i.x,height:i.y});var s=e.getPosition(),n={position:"absolute",left:s.x,top:s.y,width:e.width,height:e.height};this.cloneElement=e.clone(),this.cloneElement.setStyles(n),this.cloneElement.addClass("ig-thumbnail-clone");var o=this.getBoxStyles();o.opacity="0",o.display="block",this.domNode.setStyles(o),this.applyAnimationOptions("show"),this.setGalleryDimensions();var a=this.tumbnailInstances[t].getImageSize();if(0==isNaN(a.width)&&0==isNaN(a.height)){var h=this.List.getDomNode().getPosition(),r={width:a.width,height:a.height,left:h.x+(this.storage.canvasSize.width-a.width)/2,top:h.y+(this.storage.canvasSize.height-a.height)/2},l=n.width/n.height,u=a.width/a.height;if(l>u){var d=a.width/l;r.top+=(r.height-d)/2,r.height=d}else if(l<u){var c=a.height*l;r.left+=(r.width-c)/2,r.width=c}this.cloneElement.inject(document.body),this.cloneElement.morphCSS3(r)}else this.cloneShowComplete();this.storage.largeImageCache.src=this.getImageData(t).sizes.original.src},hide:function(t,e){this.closed=!0,this.removeViewerEvents(),this.pause(),this.applyAnimationOptions("hide"),this.fx.overlay.stop(),this.fx.overlay.start("opacity","0")},addViewerEvents:function(){window.addEvent("resize",this.bounds.viewerResize),document.addEvent("keydown",this.bounds.viewerKeydown)},removeViewerEvents:function(){window.removeEvent("resize",this.bounds.viewerResize),document.removeEvent("keydown",this.bounds.viewerKeydown)},zoomLoad:function(){this.zoomHolder.store("shown",!0),this.storage.imageSize={width:this.bigImage.width,height:this.bigImage.height},this.setZoomRectangle(),this.zoomHolder.removeClass("ig-loading")},zoomClose:function(){this.zoomHolder.store("shown",!1),this.zoomHolder.hide(),this.bigImage.setStyles({left:"",top:""}),this.List.show("block")},zoomMove:function(t){this.storage.clickOffsetsRatios={x:Math.abs(t.getStyle("left").toInt()-this.storage.canvasSize.width/2)/this.storage.imageSize.width,y:Math.abs(t.getStyle("top").toInt()-this.storage.canvasSize.height/2)/this.storage.imageSize.height}},setZoomRectangle:function(){if(this.zoomHolder.retrieve("shown")){var t=this.storage.canvasSize.width-this.storage.imageSize.width,e=this.storage.canvasSize.height-this.storage.imageSize.height;t>0&&(t/=2),e>0&&(e/=2);var i={x:{min:t,max:Math.max(0,t)},y:{min:e,max:Math.max(0,e)}};this.drag.setOptions({limit:{x:[i.x.min,i.x.max],y:[i.y.min,i.y.max]}});var s=Math.floor(this.storage.clickOffsetsRatios.x*this.storage.imageSize.width),n=Math.floor(this.storage.clickOffsetsRatios.y*this.storage.imageSize.height),o={x:this.storage.canvasSize.width/2-s,y:this.storage.canvasSize.height/2-n};for(var a in o)o[a]>i[a].max?o[a]=i[a].max:o[a]<i[a].min&&(o[a]=i[a].min);this.bigImage.setStyles({left:o.x,top:o.y})}}}),SK.Galleries.Effects.TransitionList=SK.Galleries.Effects.TransitionList||function(t,e){var i=String.toLowerCase(e.type).capitalize();return void 0==SK.Galleries.Effects.TransitionList[i]?new SK.Galleries.Effects.TransitionList.Base(t,e):new SK.Galleries.Effects.TransitionList[i](t,e)},SK.Galleries.Effects.TransitionList.Base=new Class({Implements:[Options,Events],options:{interval:5e3,fxOptions:{duration:"long",transition:Fx.Transitions.Quart.easeInOut},index:0,applyCurrentItemHeight:!1,delayStart:!1,delayAfterComplete:!1,stopOnManualTransition:!0,onBeforeStart:null,onStart:null,onComplete:null,onAfterComplete:null,onPlayStop:null,onPlayStart:null},timer:null,currentIndex:null,previousIndex:null,disabled:!1,queueHolder:[],playOn:!1,initialize:function(t,e){this.setOptions(e),this.options.delayStart>0&&(this.options.interval+=parseInt(this.options.delayStart)),this.options.delayAfterComplete>0&&(this.options.interval+=parseInt(this.options.delayAfterComplete)),this.options.fxOptions.onComplete=this.onComplete.bind(this),this.items=t,this.prepareItems(),this.set(this.options.index)},prepareItems:function(){this.createContainer(),this.options.applyCurrentItemHeight&&this.container.set("tweenCSS3",{duration:this.options.fxOptions.duration,transition:this.options.fxOptions.transition,link:"chain"})},createContainer:function(){this.container=new Element("div",{class:"ig-mask"}).inject(this.items[0].getParent()).adopt(this.items)},applyCurrentItemHeight:function(){if(this.items[this.currentIndex]){var t=this.container.getStyle("height").toInt(),e=this.items[this.currentIndex].getDimensions({computeSize:!0,styles:["border","padding","margin"]}).totalHeight;e&&t!=e&&(this.container.setStyle("height",t),this.container.tweenCSS3("height",e))}},walk:function(t,e,i,s){document.hidden||(!this.disabled||s?(this.disabled=!0,!0===this.playOn&&e&&(this.options.stopOnManualTransition?this.stop():(clearInterval(this.timer),this.timer=this.next.periodical(this.options.interval,this,[!1]))),this.fireEvent("beforeStart",[t,this.currentIndex]),this.options.delayStart?this.start.delay(this.options.delayStart,this,[t,i]):this.start(t,i)):this.queueHolder.push(this.walk.bind(this,t,e,i,!0)))},start:function(t,e){this.fireEvent("start",[t,this.currentIndex]),this.currentIndex!==t&&null!=this.items[t]&&0!=this.items[t]&&(this.previousIndex=this.currentIndex,this.currentIndex=t,this.options.applyCurrentItemHeight&&this.applyCurrentItemHeight(),this.updateImage(t)),this.onComplete()},next:function(t){var e=this.currentIndex+1<this.items.length?this.currentIndex+1:0;this.walk(e,t,"next")},previous:function(t){var e=this.currentIndex>0?this.currentIndex-1:this.items.length-1;this.walk(e,t,"previous")},set:function(t){this.previousIndex=null,this.currentIndex=t,this.updateImage(t)},updateImage:function(t){this.items[0].setStyle("margin-left",100*-t+"%")},play:function(t){!0!==this.playOn&&(this.playOn=!0,this.fireEvent("playStart"),t||this.next(),this.timer=this.next.periodical(this.options.interval,this,[!1]))},stop:function(){!1!==this.playOn&&(this.playOn=!1,clearInterval(this.timer),this.fireEvent("playStop"))},onComplete:function(){this.fireEvent("complete",[this.currentIndex]),this.options.delayAfterComplete?this.afterComplete.delay(this.options.delayAfterComplete,this):this.afterComplete()},afterComplete:function(){this.fireEvent("afterComplete",[this.currentIndex]),this.queueHolder.length>0?this.queueHolder.shift().apply():this.disabled=!1}}),SK.Galleries.Effects.TransitionList.Slide=new Class({Extends:SK.Galleries.Effects.TransitionList.Base,options:{endlessChain:!1,applyCurrentItemHeight:!1},endlessChainHelper:{element:null,reset:!1},activeMargin:0,initialize:function(t,e){t&&0!=t.length&&this.parent(t,e)},prepareItems:function(){this.createContainer();for(var t=0;t<this.items.length;t++)this.container.appendChild(this.items[t]);this.options.endlessChain&&(this.endlessChainHelper.element=this.items.getLast()),this.firstItem=this.container.getElement(".ig-slide-item")||this.container.getElement(".ig-thumb").getParent().getParent(),this.scroll=new Fx.Tween.CSS3(this.firstItem,Object.append(this.options.fxOptions,{unit:"%"}))},start:function(t,e){this.options.endlessChain&&t===this.items.length-1&&(t=0),this.fireEvent("start",[t,this.currentIndex]);this.getScrollWidth(this.items[t]);this.activeMargin=100*t,this.options.endlessChain&&(t===this.items.length-2&&"previous"==e&&(this.firstItem.setStyle("margin-left","-"+100*(this.items.length-1)+"%"),this.activeMargin=100*(this.items.length-2)),0===t&&"next"==e&&(this.activeMargin=100*(this.items.length-1),this.currentIndex=this.items.length,this.endlessChainHelper.reset=!0)),this.previousIndex=this.currentIndex,this.currentIndex=t,setTimeout(function(){this.scroll.start("margin-left","-"+this.activeMargin)}.bind(this),10)},getScrollWidth:function(t){return t.getScrolls().x+t.getPosition(this.container).x-SK.Galleries.Utils.Element.getComputedSizeSum(t,["margin-left"])},set:function(t){this.previousIndex=null,this.currentIndex=t},onComplete:function(){this.endlessChainHelper.reset&&(this.firstItem.setStyle("margin-left",0),this.endlessChainHelper.reset=!1),this.parent()}}),SK.Galleries.Effects.TransitionList.Fade=new Class({Extends:SK.Galleries.Effects.TransitionList.Base,initialize:function(t,e){t&&0!=t.length&&this.parent(t,e)},prepareItems:function(){this.parent(),this.container.setStyles({position:"relative"})},start:function(t,e){if(this.fireEvent("start",[t,this.currentIndex]),this.currentIndex!==t){this.previousIndex=this.currentIndex,this.currentIndex=t;var i={zIndex:2,opacity:0,marginLeft:0,position:"absolute",bottom:SK.Galleries.Utils.Element.getComputedSizeSum(this.container,["padding-bottom"]),left:SK.Galleries.Utils.Element.getComputedSizeSum(this.container,["padding-left"])};this.helper=this.items[this.currentIndex].clone(!0).inject(this.items[this.currentIndex],"after"),this.items[this.currentIndex].setStyles(i).set("tweenCSS3",this.options.fxOptions).tweenCSS3("opacity",0,1),this.options.applyCurrentItemHeight&&this.applyCurrentItemHeight(),null!=this.items[this.previousIndex]&&this.items[this.previousIndex].setStyle("zIndex","").set("tweenCSS3",this.options.fxOptions).tweenCSS3("opacity",1,0)}else this.onComplete()},onComplete:function(){this.updateImage(this.currentIndex),this.helper&&this.helper.destroy(),this.helper=null,this.items[this.currentIndex].setStyles({zIndex:"",opacity:"",position:"",bottom:"",left:""}),this.items[this.previousIndex]&&this.items[this.previousIndex].setStyles({zIndex:"",opacity:1}),this.parent()},set:function(t){this.parent(t);this.items[t].setStyles({zIndex:2,opacity:1,visibility:"visible"})}}),SK.Galleries.Effects.TransitionList.Zoom=new Class({Extends:SK.Galleries.Effects.TransitionList.Fade,targetScale:1.1,resetScale:1,initialize:function(t,e){t&&0!=t.length&&(this.parent(t,e),this.addEvent("beforeStart",this.beforeExecute.bind(this)))},beforeExecute:function(t,e){this.applyStyles(t,this.resetScale,!0)},onComplete:function(){this.parent(),this.applyStyles.delay(0,this,[this.currentIndex,this.targetScale])},applyStyles:function(t,e,i){var s=this.options.interval/1e3+"s";i&&(s="0s");var n=this.items[t].getElement("img");if(n){var o=["scale(",e,") ",n.retrieve("css:transform")||""].join("");n.setStyles({"-webkit-transition-property":"transform","-webkit-transition-duration":s,"-webkit-transition-timing-function":"ease-out","-webkit-transform":o,"transition-property":"transform","transition-duration":s,"transition-timing-function":"ease-out",transform:o})}}}),SK.Galleries.Effects.TransitionList.Zoomin=new Class({Extends:SK.Galleries.Effects.TransitionList.Zoom,targetScale:1.1,resetScale:1,initialize:function(t,e){this.parent(t,e)}}),SK.Galleries.Effects.TransitionList.Zoomout=new Class({Extends:SK.Galleries.Effects.TransitionList.Zoom,targetScale:1,resetScale:1.1,initialize:function(t,e){this.parent(t,e)},beforeExecute:function(t,e){t==e&&"zoomout"==this.options.type&&this.container.getFirst().addClass("zoomout"),this.parent.apply(this,arguments)}}),SK.Galleries.Effects.TransitionList.Zoominout=new Class({Extends:SK.Galleries.Effects.TransitionList.Zoom,counter:0,targetScale:1.1,resetScale:1,initialize:function(t,e){this.parent(t,e)},beforeExecute:function(t,e){this.resetScale=1,this.targetScale=1.1,this.counter%2!=0&&(this.resetScale=1.1,this.targetScale=1),this.counter++,this.parent.apply(this,arguments)}});