SK="object"==typeof SK?SK:{},SK.Apps=SK.Apps||{},SK.Apps.Entry=SK.Apps.Entry||{},SK.Apps.Entry.GoogleMaps=SK.Apps.Entry.GoogleMaps||{},SK.Apps.Entry.GoogleMaps.display=function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=13)}({13:function(t,e,i){"use strict";i.r(e);var s=i(2);i(15);function n(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}e.default=class extends s.Display{constructor(t){super(t),n(this,"elements",{}),n(this,"map",null),n(this,"marker",null),n(this,"default_zoom_level",10),n(this,"validateAddress",(function(){})),this.state.Address=this.state.Address||[this.state.StreetAddress,this.state.City,this.state.Country].filter(t=>(t||"").trim()).join(", ").trim(),this.handleChange=this.handleChange.bind(this),this.changeDesctiption=this.changeDesctiption.bind(this),this.updateIframeData=this.updateIframeData.bind(this),this.__receiveMessage=this.__receiveMessage.bind(this)}render(){const t=this.getMapSrc();return React.createElement("div",{className:"sk-gm-wrapper "+this.state.Alignment},"right"==this.state.Alignment&&this.createContentEditableElement(),React.createElement("div",{className:"sk-gm-map-holder",style:{maxWidth:this.state.Width+"px"}},React.createElement("div",{className:"sk-gm-responsive-map",style:{paddingBottom:this.state.Height/this.state.Width*100+"%"}},React.createElement("iframe",{className:"sk-gm-template",onLoad:this.updateIframeData,src:t,ref:t=>this.elements.iframe=t}))),"left"==this.state.Alignment&&this.createContentEditableElement())}componentDidMount(){this.initOnMount()}createContentEditableElement(){return React.createElement(SK.React.Component.ContentEditable,{className:"sk-gm-description",text:this.state.Description,onChange:this.changeDesctiption})}getMapSrc(){const t=this.getGoogleAPI();return t?[SK.Singletons.env.get("static_image_server"),"/Apps/GoogleMaps/gmap.htm?api_key=",t,"&instance=",this.props.node_id,"&revision=",SK.Singletons.env.get("revision")].join(""):["https://maps.google.com/maps?q=",this.state.Address?encodeURIComponent(this.state.Address):this.state.LongitudeLatitude,"&t=&z=",this.state.ZoomLevel||this.default_zoom_level,"&ie=UTF8&iwloc=&output=embed"].join("")}initOnMount(){window.addEventListener("message",this.__receiveMessage,!1),this.updateIframeData()}updateIframeData(){this.getGoogleAPI()&&this.updateMap({action:"init",options:{__in_edit_mode:this.isInEditMode(),__origin:document.location.origin,ScrollToZoom:this.state.ScrollToZoom,ZoomLevel:this.state.ZoomLevel,LongitudeLatitude:this.state.LongitudeLatitude,Directions:this.state.Directions,__directions_strings:{directions_btn:"Instrucciones",search:"Buscar"}}})}__receiveMessage(t){if(this.getGoogleAPI()&&this.props.node_id==t.data.instance&&SK.Util.filterDomainName(t.origin)===SK.Util.filterDomainName(SK.Singletons.env.get("static_image_server")))switch(t.data.action){case"alert":alert(`La solicitud de instrucciones fall√≥ debido a ${t.data.status}`);break;case"change":this.handleChange(t.data.name,t.data.value);break;case"display_address_callback":this.validateAddress(t.data.value)}}updateMap(t){this.getGoogleAPI()&&(this.elements.iframe||{}).contentWindow&&this.elements.iframe.contentWindow.postMessage(t,"*")}componentDidUpdate(t,e){this.updateMap({action:e.ScrollToZoom!=this.state.ScrollToZoom?"scrollwheel":"",options:this.state})}handleChange(t,e){this.setState({[t]:e})}displayAddress(t,e){this.validateAddress=e,this.updateMap({action:"display_address",address:t})}resizeMap(){this.updateMap({action:"resize"})}changeDesctiption(t){this.handleChange("Description",t.target.value)}getGoogleAPI(){return((this.state.__settings||{}).googleApiKey||"").trim()||(this.state.googleApiKey||"").trim()}autocompleteAPI(){return((this.state.__settings||{}).googleApiKey||"").trim()||SK.Singletons.env.get("resellerGoogleAutocompleteAPI")||(this.state.googleApiKey||"").trim()}}},15:function(t,e,i){},2:function(t,e){t.exports=SK.React.Component.Application}});